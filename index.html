
<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ç‰¹é›·æ£®å­¦é™¢æ€ªè°ˆ - å¼€å±€é€‰æ‹©</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Times New Roman', 'SimSun', serif;
        background:
          linear-gradient(135deg, #f4f1e8 0%, #e8e0d0 25%, #d4c8b8 50%, #e8e0d0 75%, #f4f1e8 100%),
          url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><defs><pattern id="paper" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse"><rect width="100" height="100" fill="%23f4f1e8"/><circle cx="20" cy="20" r="1" fill="%23d4c8b8" opacity="0.3"/><circle cx="80" cy="40" r="0.5" fill="%23d4c8b8" opacity="0.2"/><circle cx="60" cy="80" r="0.8" fill="%23d4c8b8" opacity="0.25"/></pattern></defs><rect width="100" height="100" fill="url(%23paper)"/></svg>');
        color: #2c1810;
        min-height: 100vh;
        padding: 20px;
        position: relative;
      }

      /* åˆå§‹ç•Œé¢æ ·å¼ */
      .initial-screen {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #f4f1e8 0%, #e8e0d0 50%, #f4f1e8 100%);
        position: relative;
        overflow: hidden;
      }

      .initial-screen::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background:
          radial-gradient(circle at 20% 20%, rgba(139, 69, 19, 0.05) 0%, transparent 50%),
          radial-gradient(circle at 80% 80%, rgba(184, 134, 11, 0.05) 0%, transparent 50%),
          radial-gradient(circle at 40% 60%, rgba(139, 69, 19, 0.03) 0%, transparent 50%),
          radial-gradient(circle at 70% 30%, rgba(139, 69, 19, 0.03) 0%, transparent 50%);
        pointer-events: none;
        z-index: -1;
      }

      .initial-content {
        text-align: center;
        max-width: 800px;
        padding: 60px 40px;
        background: rgba(244, 241, 232, 0.95);
        border: 3px solid #8b4513;
        border-radius: 0;
        box-shadow:
          0 8px 32px rgba(139, 69, 19, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.8);
        position: relative;
        animation: fadeInUp 1s ease-out;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .initial-header h1 {
        font-size: 3.5em;
        margin-bottom: 20px;
        color: #8b4513;
        text-shadow: 3px 3px 6px rgba(139, 69, 19, 0.4);
        font-weight: bold;
        letter-spacing: 2px;
        font-family: 'Times New Roman', serif;
      }

      .initial-header .subtitle {
        font-size: 1.4em;
        color: #654321;
        font-style: italic;
        margin-bottom: 40px;
        letter-spacing: 1px;
      }

      .author-info {
        margin: 40px 0;
        padding: 30px;
        background: rgba(139, 69, 19, 0.1);
        border: 2px solid #8b4513;
        border-radius: 0;
        text-align: left;
      }

      .author-info p {
        margin: 8px 0;
        font-size: 1.1em;
        color: #654321;
        line-height: 1.6;
      }

      .author-info p strong {
        color: #8b4513;
        font-weight: bold;
      }

      .start-button-container {
        margin-top: 50px;
      }

      .start-game-btn {
        background: linear-gradient(135deg, #8b4513, #654321);
        border: 3px solid #654321;
        padding: 20px 40px;
        font-size: 1.3em;
        color: #f4f1e8;
        border-radius: 0;
        cursor: pointer;
        transition: all 0.4s ease;
        box-shadow: 0 6px 20px rgba(139, 69, 19, 0.4);
        font-weight: bold;
        letter-spacing: 1px;
        position: relative;
        overflow: hidden;
        font-family: 'Times New Roman', serif;
      }

      .start-game-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
        transition: left 0.6s ease;
      }

      .start-game-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(139, 69, 19, 0.6);
        background: linear-gradient(135deg, #654321, #8b4513);
      }

      .start-game-btn:hover::before {
        left: 100%;
      }

      .start-game-btn:active {
        transform: translateY(-1px);
        box-shadow: 0 4px 15px rgba(139, 69, 19, 0.5);
      }

      /* åŠ è½½åŠ¨ç”» */
      .loading-spinner {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid rgba(244, 241, 232, 0.3);
        border-radius: 50%;
        border-top-color: #f4f1e8;
        animation: spin 1s ease-in-out infinite;
        margin-right: 10px;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      .loading {
        display: inline-block;
        width: 16px;
        height: 16px;
        border: 2px solid rgba(244, 241, 232, 0.3);
        border-radius: 50%;
        border-top-color: #f4f1e8;
        animation: spin 1s ease-in-out infinite;
        margin-right: 8px;
      }

      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background:
          radial-gradient(circle at 30% 70%, rgba(44, 24, 16, 0.05) 0%, transparent 50%),
          radial-gradient(circle at 70% 30%, rgba(139, 69, 19, 0.03) 0%, transparent 50%);
        pointer-events: none;
        z-index: -1;
      }

      .container {
        max-width: 1000px;
        max-height: 90vh;
        margin: 0 auto;
        background: rgba(244, 241, 232, 0.95);
        border: 2px solid #8b4513;
        border-radius: 0;
        padding: 25px;
        box-shadow:
          0 4px 20px rgba(139, 69, 19, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.8);
        position: relative;
        overflow: hidden;
        display: flex;
        flex-direction: column;
      }

      .container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent, rgba(139, 69, 19, 0.4), transparent);
      }

      .header {
        text-align: center;
        margin-bottom: 25px;
      }

      .header h1 {
        font-size: 2.2em;
        margin-bottom: 12px;
        color: #8b4513;
        text-shadow: 2px 2px 4px rgba(139, 69, 19, 0.3);
        font-weight: bold;
        letter-spacing: 1px;
        font-family: 'Times New Roman', serif;
        text-align: center;
      }

      .header p {
        font-size: 1em;
        opacity: 0.8;
        color: #654321;
        font-weight: normal;
        letter-spacing: 0.3px;
        text-align: center;
        font-style: italic;
        margin: 0;
      }

      /* æ­¥éª¤å¯¼èˆª - å¤æœ´é£æ ¼ */
      .step-nav {
        display: flex;
        justify-content: space-around;
        margin-bottom: 25px;
        flex-wrap: wrap;
        position: relative;
        padding: 12px 0;
        border-bottom: 2px solid #8b4513;
      }

      .step-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin: 0 10px;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        z-index: 1;
        padding: 8px;
        border-radius: 8px;
      }

      .step-item:hover {
        background: rgba(139, 69, 19, 0.1);
        transform: translateY(-2px);
      }

      .step-number {
        width: 35px;
        height: 35px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        margin-bottom: 5px;
        transition: all 0.3s ease;
        font-size: 14px;
      }

      .step-item.active .step-number {
        background: #8b4513;
        color: #f4f1e8;
        box-shadow: 0 2px 8px rgba(139, 69, 19, 0.4);
        border: 2px solid #654321;
        transform: scale(1.1);
      }

      .step-item.completed .step-number {
        background: #654321;
        color: #f4f1e8;
        border: 2px solid #8b4513;
        box-shadow: 0 1px 4px rgba(139, 69, 19, 0.3);
      }

      .step-item:not(.active):not(.completed) .step-number {
        background: #d4c8b8;
        color: #8b4513;
        border: 2px solid #b8860b;
      }

      .step-label {
        font-size: 0.8em;
        opacity: 0.8;
        color: #654321;
        font-weight: normal;
        text-align: center;
      }

      .step-item.active .step-label {
        opacity: 1;
        font-weight: bold;
        color: #8b4513;
      }

      /* å†…å®¹åŒºåŸŸ */
      .content-area {
        min-height: 350px;
        max-height: 500px;
        overflow-y: auto;
        position: relative;
        padding: 15px;
        border: 2px solid #8b4513;
        border-radius: 8px;
        background: rgba(244, 241, 232, 0.95);
        box-shadow: inset 0 2px 8px rgba(139, 69, 19, 0.1);
        flex: 1;
      }

      /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */
      .content-area::-webkit-scrollbar {
        width: 8px;
      }

      .content-area::-webkit-scrollbar-track {
        background: #e8e0d0;
        border-radius: 4px;
      }

      .content-area::-webkit-scrollbar-thumb {
        background: #8b4513;
        border-radius: 4px;
        border: 1px solid #654321;
      }

      .content-area::-webkit-scrollbar-thumb:hover {
        background: #654321;
      }

      /* æ­¥éª¤æ ‡é¢˜æ ·å¼ */
      .scroll-header,
      .bookshelf-header,
      .map-header,
      .clock-header,
      .mystery-header,
      .treasure-header {
        text-align: center;
        margin-bottom: 20px;
        padding: 12px;
        border-bottom: 2px solid #8b4513;
      }

      .scroll-header h2,
      .bookshelf-header h2,
      .map-header h2,
      .clock-header h2,
      .mystery-header h2,
      .treasure-header h2 {
        font-size: 1.6em;
        color: #8b4513;
        margin-bottom: 6px;
        font-family: 'Times New Roman', serif;
        font-weight: bold;
      }

      .scroll-subtitle,
      .bookshelf-subtitle,
      .map-subtitle,
      .clock-subtitle,
      .mystery-subtitle,
      .treasure-subtitle {
        font-size: 0.9em;
        color: #654321;
        font-style: italic;
        opacity: 0.8;
      }

      /* å·è½´å®¹å™¨ */
      .scroll-container {
        background: linear-gradient(90deg, #f4f1e8 0%, #e8e0d0 50%, #f4f1e8 100%);
        border: 2px solid #8b4513;
        border-radius: 0;
        padding: 15px;
        box-shadow: inset 0 2px 4px rgba(139, 69, 19, 0.2);
      }

      /* ä¹¦æ¶å®¹å™¨ */
      .bookshelf-container {
        background: linear-gradient(135deg, #8b4513 0%, #654321 100%);
        border: 3px solid #654321;
        border-radius: 0;
        padding: 20px;
        box-shadow: 0 4px 12px rgba(139, 69, 19, 0.4);
      }

      /* åœ°å›¾å®¹å™¨ */
      .map-container {
        background:
          linear-gradient(45deg, #f4f1e8 25%, transparent 25%), linear-gradient(-45deg, #f4f1e8 25%, transparent 25%),
          linear-gradient(45deg, transparent 75%, #f4f1e8 75%), linear-gradient(-45deg, transparent 75%, #f4f1e8 75%);
        background-size: 20px 20px;
        background-position:
          0 0,
          0 10px,
          10px -10px,
          -10px 0px;
        border: 2px solid #8b4513;
        border-radius: 0;
        padding: 15px;
      }

      /* åœ°å›¾å¼¹çª—æ ·å¼ */
      .map-modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        backdrop-filter: blur(5px);
      }

      .map-modal-content {
        background: rgba(244, 241, 232, 0.95);
        margin: 5% auto;
        padding: 20px;
        border: 3px solid #8b4513;
        border-radius: 0;
        width: 90%;
        max-width: 800px;
        max-height: 80vh;
        overflow-y: auto;
        box-shadow: 0 8px 32px rgba(139, 69, 19, 0.5);
        position: relative;
      }

      .map-modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid #8b4513;
      }

      .map-modal-title {
        font-size: 1.5em;
        color: #8b4513;
        font-weight: bold;
        margin: 0;
      }

      .map-modal-close {
        background: #dc2626;
        color: #f4f1e8;
        border: 2px solid #dc2626;
        padding: 8px 16px;
        border-radius: 0;
        font-size: 1rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
      }

      .map-modal-close:hover {
        background: #b91c1c;
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(220, 38, 38, 0.4);
      }

      .map-preview-container {
        text-align: center;
        margin-bottom: 20px;
        padding: 10px;
        background: rgba(255, 255, 255, 0.8);
        border: 1px solid #8b4513;
        border-radius: 8px;
      }

      .map-preview-btn {
        background: linear-gradient(135deg, #8b4513, #654321);
        color: #f4f1e8;
        border: 2px solid #8b4513;
        padding: 12px 24px;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(139, 69, 19, 0.3);
      }

      .map-preview-btn:hover {
        background: linear-gradient(135deg, #654321, #8b4513);
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(139, 69, 19, 0.4);
      }

      .map-image {
        max-width: 100%;
        max-height: 70vh;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(139, 69, 19, 0.2);
        display: block;
        margin: 0 auto;
      }

      /* æ—¶é’Ÿå®¹å™¨ */
      .clock-container {
        background: radial-gradient(circle, #f4f1e8 0%, #e8e0d0 70%, #d4c8b8 100%);
        border: 2px solid #8b4513;
        border-radius: 50%;
        padding: 25px;
        box-shadow: 0 4px 16px rgba(139, 69, 19, 0.3);
        max-width: 600px;
        margin: 0 auto;
      }

      /* ç¥ç§˜å®¹å™¨ */
      .mystery-container {
        background:
          radial-gradient(circle at 30% 30%, rgba(139, 69, 19, 0.1) 0%, transparent 50%),
          radial-gradient(circle at 70% 70%, rgba(184, 134, 11, 0.1) 0%, transparent 50%);
        border: 2px solid #b8860b;
        border-radius: 0;
        padding: 20px;
        box-shadow: 0 4px 20px rgba(184, 134, 11, 0.3);
      }

      /* å®ç®±å®¹å™¨ */
      .treasure-container {
        background: linear-gradient(135deg, #f4f1e8 0%, #e8e0d0 25%, #d4c8b8 50%, #e8e0d0 75%, #f4f1e8 100%);
        border: 3px solid #b8860b;
        border-radius: 0;
        padding: 15px;
        box-shadow:
          0 4px 16px rgba(184, 134, 11, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.8);
      }

      .step-content {
        display: none;
        animation: fadeIn 0.5s ease;
      }

      .step-content.active {
        display: block;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* é€‰æ‹©å¡ç‰‡æ ·å¼ - å¤æœ´è‡ªç„¶å¸ƒå±€ */
      .selection-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 12px;
        margin-bottom: 15px;
      }

      .selection-card {
        background: rgba(244, 241, 232, 0.9);
        border: 2px solid #8b4513;
        border-radius: 0;
        padding: 15px;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        box-shadow:
          0 2px 8px rgba(139, 69, 19, 0.2),
          inset 0 1px 0 rgba(255, 255, 255, 0.8);
        min-height: 110px;
      }

      .selection-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent, rgba(139, 69, 19, 0.4), transparent);
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .selection-card:hover {
        transform: translateY(-3px);
        box-shadow:
          0 6px 16px rgba(139, 69, 19, 0.3),
          0 0 0 1px rgba(139, 69, 19, 0.5);
        background: rgba(244, 241, 232, 1);
        border-color: #654321;
        z-index: 5;
      }

      .selection-card:hover::before {
        opacity: 1;
      }

      .selection-card.selected {
        background: rgba(255, 255, 255, 0.9) !important;
        border-color: #8b4513;
        border-width: 3px;
        box-shadow:
          0 0 15px rgba(139, 69, 19, 0.5),
          0 4px 12px rgba(139, 69, 19, 0.4),
          0 0 0 2px rgba(139, 69, 19, 0.6);
        transform: scale(1.02);
        z-index: 3;
        position: relative;
      }

      .selection-card.selected::before {
        opacity: 1;
        background: linear-gradient(90deg, transparent, rgba(139, 69, 19, 0.6), transparent);
      }

      .selection-card.selected::after {
        content: 'âœ“';
        position: absolute;
        top: 10px;
        right: 10px;
        background: #8b4513;
        color: #f4f1e8;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 14px;
        box-shadow: 0 2px 4px rgba(139, 69, 19, 0.3);
        z-index: 4;
      }

      .card-icon {
        font-size: 1.8em;
        margin-bottom: 8px;
        text-align: center;
        filter: drop-shadow(1px 1px 2px rgba(139, 69, 19, 0.3));
        transition: all 0.3s ease;
        display: block;
      }

      .selection-card:hover .card-icon {
        transform: scale(1.1);
        filter: drop-shadow(2px 2px 4px rgba(139, 69, 19, 0.4));
      }

      .selection-card.selected .card-icon {
        transform: scale(1.15);
        filter: drop-shadow(2px 2px 6px rgba(139, 69, 19, 0.5));
      }

      .card-title {
        font-size: 1em;
        font-weight: bold;
        margin-bottom: 6px;
        text-align: center;
        color: #8b4513;
        text-shadow: 1px 1px 2px rgba(139, 69, 19, 0.2);
        letter-spacing: 0.3px;
        line-height: 1.2;
        font-family: 'Times New Roman', serif;
      }

      .card-description {
        font-size: 0.85em;
        opacity: 0.8;
        line-height: 1.3;
        text-align: center;
        color: #654321;
        font-weight: normal;
        letter-spacing: 0.2px;
        margin-bottom: 10px;
      }

      .card-effects {
        margin-top: 10px;
        border-top: 1px solid rgba(139, 69, 19, 0.3);
        padding-top: 8px;
      }

      .positive-effect,
      .negative-effect {
        margin-bottom: 6px;
        text-align: left;
      }

      .effect-label {
        font-size: 0.75em;
        font-weight: bold;
        display: block;
        margin-bottom: 2px;
      }

      .positive-effect .effect-label {
        color: #059669;
      }

      .negative-effect .effect-label {
        color: #dc2626;
      }

      .effect-text {
        font-size: 0.75em;
        line-height: 1.2;
        color: #654321;
        opacity: 0.9;
        display: block;
      }

      /* æŠ½å¥–åŒºåŸŸ - å¤æœ´é£æ ¼ */
      .gacha-area {
        text-align: center;
        padding: 25px 20px;
        position: relative;
        background: linear-gradient(135deg, #f4f1e8 0%, #e8e0d0 50%, #f4f1e8 100%);
        border: 3px solid #8b4513;
        border-radius: 0;
        margin: 20px 0;
        box-shadow:
          0 4px 16px rgba(139, 69, 19, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.8);
      }

      .gacha-area::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(45deg, transparent 30%, rgba(139, 69, 19, 0.05) 50%, transparent 70%);
        pointer-events: none;
      }

      .gacha-button {
        background: #8b4513;
        border: 2px solid #654321;
        padding: 6px 16px;
        font-size: 0.85em;
        color: #f4f1e8;
        border-radius: 0;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(139, 69, 19, 0.3);
        font-weight: bold;
        letter-spacing: 0.3px;
        position: relative;
        overflow: hidden;
        font-family: 'Times New Roman', serif;
      }

      .gacha-button::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.5s ease;
      }

      .gacha-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(139, 69, 19, 0.4);
        background: #654321;
      }

      .gacha-button:hover::before {
        left: 100%;
      }

      .gacha-button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      .gacha-buttons {
        display: flex;
        gap: 15px;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
      }

      .skip-button {
        background: #6b7280;
        border: 2px solid #4b5563;
        padding: 6px 16px;
        font-size: 0.85em;
        color: #f4f1e8;
        border-radius: 0;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(107, 114, 128, 0.3);
        font-weight: bold;
        letter-spacing: 0.3px;
        position: relative;
        overflow: hidden;
        font-family: 'Times New Roman', serif;
      }

      .skip-button::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.5s ease;
      }

      .skip-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(107, 114, 128, 0.4);
        background: #4b5563;
      }

      .skip-button:hover::before {
        left: 100%;
      }

      .skip-button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      /* æ—¶é—´æ»‘åŠ¨æ¡æ ·å¼ */
      .time-slider-container {
        padding: 20px 15px;
        background: linear-gradient(135deg, #f4f1e8 0%, #e8e0d0 50%, #f4f1e8 100%);
        border: 3px solid #8b4513;
        border-radius: 0;
        margin: 15px 0;
        box-shadow:
          0 4px 16px rgba(139, 69, 19, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.8);
        position: relative;
      }

      .time-slider-container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(45deg, transparent 30%, rgba(139, 69, 19, 0.05) 50%, transparent 70%);
        pointer-events: none;
      }

      .time-slider {
        width: 100%;
        height: 8px;
        border-radius: 4px;
        background: linear-gradient(to right, #e8e0d0, #d4c4a8);
        outline: none;
        -webkit-appearance: none;
        appearance: none;
        border: 2px solid #8b4513;
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        position: relative;
        z-index: 2;
      }

      .time-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        background: linear-gradient(135deg, #8b4513, #654321);
        cursor: pointer;
        border: 3px solid #f4f1e8;
        box-shadow:
          0 2px 8px rgba(139, 69, 19, 0.4),
          inset 0 1px 0 rgba(255, 255, 255, 0.3);
        transition: all 0.3s ease;
      }

      .time-slider::-webkit-slider-thumb:hover {
        transform: scale(1.1);
        box-shadow:
          0 4px 12px rgba(139, 69, 19, 0.6),
          inset 0 1px 0 rgba(255, 255, 255, 0.3);
      }

      .time-slider::-moz-range-thumb {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        background: linear-gradient(135deg, #8b4513, #654321);
        cursor: pointer;
        border: 3px solid #f4f1e8;
        box-shadow:
          0 2px 8px rgba(139, 69, 19, 0.4),
          inset 0 1px 0 rgba(255, 255, 255, 0.3);
        transition: all 0.3s ease;
      }

      .time-slider::-moz-range-thumb:hover {
        transform: scale(1.1);
        box-shadow:
          0 4px 12px rgba(139, 69, 19, 0.6),
          inset 0 1px 0 rgba(255, 255, 255, 0.3);
      }

      .time-labels {
        display: flex;
        justify-content: space-between;
        margin-top: 12px;
        padding: 0 8px;
        position: relative;
        z-index: 2;
      }

      .time-label {
        text-align: center;
        font-size: 0.8em;
        color: #8b4513;
        font-weight: bold;
        text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
        position: relative;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .time-label:hover {
        color: #654321;
        transform: translateY(-2px);
      }

      .time-label.active {
        color: #654321;
        font-size: 0.9em;
        text-shadow: 0 2px 4px rgba(139, 69, 19, 0.3);
      }

      .time-display {
        text-align: center;
        margin: 15px 0;
        padding: 12px;
        background: rgba(244, 241, 232, 0.9);
        border: 2px solid #8b4513;
        border-radius: 0;
        box-shadow: 0 2px 8px rgba(139, 69, 19, 0.2);
        position: relative;
        z-index: 2;
      }

      .time-display h3 {
        margin: 0 0 8px 0;
        color: #8b4513;
        font-size: 1.2em;
        font-weight: bold;
        text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
      }

      .time-display p {
        margin: 4px 0;
        color: #654321;
        font-size: 0.9em;
        line-height: 1.3;
      }

      .gacha-result {
        margin-top: 20px;
        padding: 20px;
        background: rgba(244, 241, 232, 0.95);
        border: 2px solid #8b4513;
        border-radius: 0;
        display: none;
        box-shadow:
          0 4px 16px rgba(139, 69, 19, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.8);
        position: relative;
        transform: scale(0.95);
        animation: resultAppear 0.5s ease forwards;
      }

      @keyframes resultAppear {
        to {
          transform: scale(1);
        }
      }

      /* æŠ½å¥–é€‰é¡¹æ‚¬åœæ•ˆæœ */
      .gacha-option:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 6px 20px rgba(139, 69, 19, 0.4);
        border-color: #654321;
        background: rgba(244, 241, 232, 1);
      }

      /* æŒ‰é’®åŒºåŸŸ */
      .button-area {
        display: flex;
        justify-content: space-between;
        margin-top: 20px;
        padding: 12px 0;
        border-top: 2px solid #8b4513;
      }

      .btn {
        padding: 6px 16px;
        border: 2px solid #8b4513;
        border-radius: 0;
        font-size: 0.85em;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: bold;
        letter-spacing: 0.2px;
        position: relative;
        overflow: hidden;
        font-family: 'Times New Roman', serif;
      }

      .btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.4s ease;
      }

      .btn:hover::before {
        left: 100%;
      }

      .btn-prev {
        background: #f4f1e8;
        color: #8b4513;
        border: 2px solid #8b4513;
      }

      .btn-prev:hover {
        background: #e8e0d0;
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(139, 69, 19, 0.3);
      }

      .btn-next {
        background: #8b4513;
        color: #f4f1e8;
        border: 2px solid #8b4513;
      }

      .btn-next:hover {
        background: #654321;
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(139, 69, 19, 0.4);
      }

      .btn-start {
        background: #b8860b;
        color: #f4f1e8;
        font-size: 1em;
        padding: 10px 25px;
        border: 2px solid #b8860b;
        box-shadow: 0 2px 8px rgba(184, 134, 11, 0.3);
      }

      .btn-start:hover {
        background: #daa520;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(184, 134, 11, 0.4);
      }

      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      /* è¿›åº¦æ¡ */
      .progress-bar {
        width: 100%;
        height: 4px;
        background: #e8e0d0;
        border-radius: 0;
        margin-bottom: 25px;
        overflow: hidden;
        border: 1px solid #8b4513;
        position: relative;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #8b4513 0%, #654321 50%, #8b4513 100%);
        border-radius: 0;
        transition: width 0.5s ease;
        width: 0%;
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);
        position: relative;
        overflow: hidden;
      }

      .progress-fill::after {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        animation: shimmer 3s infinite;
      }

      @keyframes shimmer {
        0% {
          left: -100%;
        }
        100% {
          left: 100%;
        }
      }

      /* å“åº”å¼è®¾è®¡ */
      @media (max-width: 768px) {
        .container {
          padding: 15px;
        }

        .header h1 {
          font-size: 1.8em;
        }

        .step-nav {
          flex-direction: column;
          align-items: center;
          gap: 10px;
        }

        .step-item {
          margin: 5px 0;
        }

        .selection-grid {
          grid-template-columns: 1fr;
          gap: 10px;
        }

        .selection-card {
          margin-bottom: 10px;
        }

        .button-area {
          flex-direction: column;
          gap: 10px;
        }

        .btn {
          width: 100%;
        }

        .clock-container {
          border-radius: 0;
          max-width: 100%;
        }
      }

      /* åŠ è½½åŠ¨ç”» */
      .loading {
        display: inline-block;
        width: 16px;
        height: 16px;
        border: 2px solid rgba(139, 69, 19, 0.2);
        border-radius: 50%;
        border-top-color: #8b4513;
        animation: spin 1s ease infinite;
        box-shadow: 0 0 4px rgba(139, 69, 19, 0.2);
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* æ·»åŠ ä¸€äº›å¾®å¦™çš„åŠ¨ç”»æ•ˆæœ */
      .step-content {
        animation: fadeInUp 0.5s ease;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* æ ‡é¢˜åŠ¨ç”» */
      .header h1 {
        animation: titleGlow 4s ease-in-out infinite alternate;
      }

      @keyframes titleGlow {
        from {
          filter: drop-shadow(1px 1px 2px rgba(139, 69, 19, 0.3));
        }
        to {
          filter: drop-shadow(2px 2px 4px rgba(139, 69, 19, 0.5));
        }
      }
    </style>
  </head>
  <body>
    <!-- åˆå§‹ç•Œé¢ -->
    <div class="initial-screen" id="initialScreen">
      <div class="initial-content">
        <div class="initial-header">
          <h1>ğŸ­ ç‰¹é›·æ£®å­¦é™¢æ€ªè°ˆ</h1>
          <p class="subtitle">æ‰­æ›²çš„çˆ±æ„ï¼Œæ°¸æ’çš„è½®å›</p>
        </div>

        <div class="author-info">
          <p><strong>æˆ‘æ˜¯Eternal zz</strong></p>
          <p>æœ¬å¡æ˜¯å›´ç»•ç‰¹é›·æ£®å­¦é™¢æ„å»ºçš„ä¸–ç•Œè§‚</p>
          <p>âš ï¸ ç¦æ­¢å•†ç”¨ï¼Œç¦æ­¢äºŒåˆ›ï¼Œå¯äºŒä¼ ä»…é™ç±»è„‘ã€æ—…ç¨‹</p>
          <p>æœ¬å¡å…è´¹æ¸¸ç©</p>
          <p>discord id: eternalzz0840</p>
        </div>

        <div class="start-button-container">
          <button class="start-game-btn" id="showGameBtn">ğŸš€ å¼€å§‹æ¸¸æˆ</button>
        </div>
      </div>
    </div>

    <!-- æ¸¸æˆç•Œé¢ -->
    <div class="container" id="gameContainer" style="display: none">
      <div class="header">
        <h1>ğŸ­ ç‰¹é›·æ£®å­¦é™¢æ€ªè°ˆ</h1>
        <p>é€‰æ‹©ä½ çš„å¼€å±€é…ç½®ï¼Œå¼€å§‹ä½ çš„è®­ç»ƒå‘˜ç”Ÿæ¶¯</p>
      </div>

      <!-- è¿›åº¦æ¡ -->
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>

      <!-- æ­¥éª¤å¯¼èˆª -->
      <div class="step-nav">
        <div class="step-item active" data-step="1">
          <div class="step-number">1</div>
          <div class="step-label">å¤©èµ‹é€‰æ‹©</div>
        </div>
        <div class="step-item" data-step="2">
          <div class="step-number">2</div>
          <div class="step-label">èƒŒæ™¯é€‰æ‹©</div>
        </div>
        <div class="step-item" data-step="3">
          <div class="step-number">3</div>
          <div class="step-label">åœ°ç‚¹é€‰æ‹©</div>
        </div>
        <div class="step-item" data-step="4">
          <div class="step-number">4</div>
          <div class="step-label">æ—¶é—´é€‰æ‹©</div>
        </div>
        <div class="step-item" data-step="5">
          <div class="step-number">5</div>
          <div class="step-label">é©¬å¨˜æŠ½å¥–</div>
        </div>
        <div class="step-item" data-step="6">
          <div class="step-number">6</div>
          <div class="step-label">é“å…·é€‰æ‹©</div>
        </div>
      </div>

      <!-- å†…å®¹åŒºåŸŸ -->
      <div class="content-area">
        <!-- æ­¥éª¤1: å¤©èµ‹é€‰æ‹© - å·è½´é£æ ¼ -->
        <div class="step-content active" id="step1">
          <div class="scroll-header">
            <h2>ğŸ“œ å¤©èµ‹å·è½´</h2>
            <p class="scroll-subtitle">é€‰æ‹©ä½ çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œè¿™å°†å†³å®šä½ åœ¨ç‰¹é›·æ£®å­¦é™¢çš„è®­ç»ƒæ–¹å‘</p>
          </div>
          <div class="scroll-container">
            <div class="selection-grid" id="talentGrid">
              <!-- å¤©èµ‹å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
          </div>
        </div>

        <!-- æ­¥éª¤2: èƒŒæ™¯é€‰æ‹© - ä¹¦æ¶é£æ ¼ -->
        <div class="step-content" id="step2">
          <div class="bookshelf-header">
            <h2>ğŸ“š èƒŒæ™¯ä¹¦æ¶</h2>
            <p class="bookshelf-subtitle">ç¿»å¼€ä½ çš„è¿‡å¾€ï¼Œé€‰æ‹©ä½ çš„èµ·ç‚¹</p>
          </div>
          <div class="bookshelf-container">
            <div class="selection-grid" id="backgroundGrid">
              <!-- èƒŒæ™¯å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
          </div>
        </div>

        <!-- æ­¥éª¤3: åœ°ç‚¹é€‰æ‹© - åœ°å›¾é£æ ¼ -->
        <div class="step-content" id="step3">
          <div class="map-header">
            <h2>ğŸ—ºï¸ å­¦é™¢åœ°å›¾</h2>
            <p class="map-subtitle">é€‰æ‹©ä½ çš„èµ·å§‹ä½ç½®ï¼Œæ¯ä¸ªåœ°ç‚¹éƒ½æœ‰ä¸åŒçš„æœºé‡ä¸æŒ‘æˆ˜</p>
          </div>
          <div class="map-container">
            <div class="map-preview-container">
              <button
                type="button"
                class="map-preview-btn"
                onclick="document.getElementById('mapModal').style.display = 'block';"
              >
                ğŸ—ºï¸ ç‚¹å‡»é¢„è§ˆåœ°å›¾
              </button>
            </div>
            <div class="selection-grid" id="locationGrid">
              <!-- åœ°ç‚¹å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
          </div>
        </div>

        <!-- æ­¥éª¤4: æ—¶é—´é€‰æ‹© - æ—¶é’Ÿé£æ ¼ -->
        <div class="step-content" id="step4">
          <div class="clock-header">
            <h2>ğŸ•°ï¸ æ—¶å…‰æ²™æ¼</h2>
            <p class="clock-subtitle">é€‰æ‹©ä½ çš„å¼€å±€æ—¶åˆ»ï¼Œæ—¶é—´å°†å½±å“ä¸€åˆ‡</p>
          </div>
          <div class="clock-container">
            <div class="selection-grid" id="timeGrid">
              <!-- æ—¶é—´å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
          </div>
        </div>

        <!-- æ­¥éª¤5: é©¬å¨˜æŠ½å¥– - ç¥ç§˜ç›’å­é£æ ¼ -->
        <div class="step-content" id="step5">
          <div class="mystery-header">
            <h2>ğŸ ç¥ç§˜å®ç›’</h2>
            <p class="mystery-subtitle">æ‰“å¼€å®ç›’ï¼Œé‚‚é€…ä½ çš„ç¬¬ä¸€ä½é©¬å¨˜ä¼™ä¼´ï¼Œæˆ–é€‰æ‹©è·³è¿‡</p>
          </div>
          <div class="mystery-container">
            <div class="gacha-area">
              <div class="gacha-buttons">
                <button class="gacha-button" id="gachaButton">ğŸ° å¼€å¯å®ç›’</button>
                <button class="skip-button" id="skipButton">â­ï¸ è·³è¿‡æŠ½å¥–</button>
              </div>
              <div class="gacha-result" id="gachaResult">
                <!-- æŠ½å¥–ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
              </div>
            </div>
          </div>
        </div>

        <!-- æ­¥éª¤6: é“å…·é€‰æ‹© - å®ç®±é£æ ¼ -->
        <div class="step-content" id="step6">
          <div class="treasure-header">
            <h2>ğŸ’ å®ç‰©å®ç®±</h2>
            <p class="treasure-subtitle">é€‰æ‹©ä¸‰ä»¶å®ç‰©ï¼Œå®ƒä»¬å°†æˆä¸ºä½ çš„åˆå§‹è£…å¤‡</p>
          </div>
          <div class="treasure-container">
            <div class="selection-grid" id="itemGrid">
              <!-- é“å…·å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
          </div>
        </div>
      </div>

      <!-- æŒ‰é’®åŒºåŸŸ -->
      <div class="button-area">
        <button class="btn btn-prev" id="prevBtn" style="display: none">â† ä¸Šä¸€æ­¥</button>
        <button class="btn btn-next" id="nextBtn">ä¸‹ä¸€æ­¥ â†’</button>
        <button class="btn btn-start" id="startBtn" style="display: none">ğŸš€ å¼€å§‹æ¸¸æˆ</button>
      </div>
    </div>

    <!-- åœ°å›¾å¼¹çª— -->
    <div id="mapModal" class="map-modal">
      <div class="map-modal-content">
        <div class="map-modal-header">
          <h3 class="map-modal-title">ğŸ—ºï¸ ç‰¹é›·æ£®å­¦é™¢åœ°å›¾</h3>
          <button class="map-modal-close" onclick="document.getElementById('mapModal').style.display = 'none';">
            âŒ å…³é—­
          </button>
        </div>
        <img src="https://files.catbox.moe/egokpv.png" alt="ç‰¹é›·æ£®å­¦é™¢åœ°å›¾" class="map-image" />
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" />

    <script>
      // åœ°å›¾å¼¹çª—ç‚¹å‡»å¤–éƒ¨å…³é—­
      window.onclick = function (event) {
        const modal = document.getElementById('mapModal');
        if (event.target === modal) {
          modal.style.display = 'none';
        }
      };
    </script>

    <script>
      // ç‰¹é›·æ£®å­¦é™¢æ€ªè°ˆ - å¼€å±€é€‰æ‹©ç³»ç»Ÿ
      class OpeningSelector {
        constructor() {
          this.currentStep = 1;
          this.totalSteps = 6;
          this.selections = {
            talent: null,
            background: null,
            location: null,
            time: null,
            umaMusume: null,
            items: [],
          };

          this.init();
        }

        init() {
          this.setupEventListeners();
          this.loadData();

          // ç¡®ä¿åˆå§‹ç•Œé¢æ˜¾ç¤ºï¼Œæ¸¸æˆç•Œé¢éšè—
          $('#initialScreen').show();
          $('#gameContainer').hide();

          // åªæœ‰åœ¨æ¸¸æˆç•Œé¢æ˜¾ç¤ºæ—¶æ‰åˆå§‹åŒ–æ­¥éª¤
          if ($('#gameContainer').is(':visible')) {
            this.renderCurrentStep();
            this.updateProgress();
            this.updateButtons();
          }
        }

        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        setupEventListeners() {
          // åˆå§‹ç•Œé¢æŒ‰é’®
          $('#showGameBtn').on('click', () => this.showGameInterface());

          // æ­¥éª¤å¯¼èˆªç‚¹å‡»
          $('.step-item').on('click', e => {
            const step = parseInt($(e.currentTarget).data('step'));
            if (this.canNavigateToStep(step)) {
              this.goToStep(step);
            }
          });

          // æŒ‰é’®äº‹ä»¶
          $('#prevBtn').on('click', () => this.prevStep());
          $('#nextBtn').on('click', () => this.nextStep());
          $('#startBtn').on('click', () => this.startGame());

          // æŠ½å¥–æŒ‰é’®
          $('#gachaButton').on('click', () => this.performGacha());

          // è·³è¿‡æŒ‰é’®
          $('#skipButton').on('click', () => this.skipGacha());

          // å¡ç‰‡é€‰æ‹©äº‹ä»¶
          $(document).on('click', '.selection-card', e => {
            this.handleCardSelection(e);
          });
        }

        // æ˜¾ç¤ºæ¸¸æˆç•Œé¢
        showGameInterface() {
          const btn = $('#showGameBtn');
          btn.prop('disabled', true).html('<span class="loading-spinner"></span> åŠ è½½ä¸­...');

          // æ¨¡æ‹ŸåŠ è½½æ—¶é—´
          setTimeout(() => {
            $('#initialScreen').fadeOut(800, () => {
              $('#gameContainer').fadeIn(800, () => {
                // æ¸¸æˆç•Œé¢æ˜¾ç¤ºååˆå§‹åŒ–æ­¥éª¤
                this.renderCurrentStep();
                this.updateProgress();
                this.updateButtons();
                btn.prop('disabled', false).text('ğŸš€ å¼€å§‹æ¸¸æˆ');
              });
            });
          }, 1500);
        }

        // åŠ è½½æ•°æ®
        loadData() {
          this.talents = this.getTalentData();
          this.backgrounds = this.getBackgroundData();
          this.locations = this.getLocationData();
          this.times = this.getTimeData();
          this.umaMusumes = this.getUmaMusumeData();
          this.items = this.getItemData();
        }

        // å¤©èµ‹æ•°æ® - æ‰­æ›²ä¹‹çˆ±ç³»ç»Ÿ
        getTalentData() {
          return [
            {
              id: 'possession_love',
              icon: 'ğŸ”’',
              name: 'å¼ºåŒ–ç³»ï¼ˆå æœ‰ä¹‹çˆ±ï¼‰',
              description: 'é€šè¿‡ç‹¬å å’Œæ§åˆ¶æ¥å¼ºåŒ–è‡ªèº«ã€‚åŠ›é‡æºäºå¯¹æŸç‰©çš„å¼ºçƒˆå æœ‰æ¬²ã€‚',
              positive: 'èƒ½å¤Ÿçœ‹ç©¿è§„åˆ™æ¼æ´ï¼Œæ‰¾åˆ°éšè—å¼±ç‚¹ï¼›çŸ­æ—¶é—´å†…å¤§å¹…æå‡é˜²å¾¡åŠ›ï¼›å…·ç°åŒ–æ— å½¢é”é“¾é”å®šç›®æ ‡ã€‚',
              negative:
                'èƒ½åŠ›è¶Šå¼ºï¼Œå¯¹"çˆ±äºº"çš„ä¾èµ–å’ŒæŸç¼šè¶Šæ·±ï¼Œæœ€ç»ˆå¤±å»è‡ªæˆ‘ï¼›è§†é‡å˜å¾—ç‹­çª„ï¼›æ¯æ¬¡ä½¿ç”¨ç•™ä¸‹"ä¼¤ç—•"ï¼›é”é“¾ä¼šåå™¬è‡ªèº«ã€‚',
              category: 'possession',
            },
            {
              id: 'deception_love',
              icon: 'ğŸ­',
              name: 'å˜åŒ–ç³»ï¼ˆè°è¨€ä¹‹çˆ±ï¼‰',
              description: 'å°†è°è¨€å’Œæ¬ºéª—è½¬åŒ–ä¸ºç°å®ã€‚åŠ›é‡æ˜¯ä¸ç¨³å®šçš„ï¼Œéšç€æ¬ºéª—è€Œæ”¹å˜ã€‚',
              positive: 'æš‚æ—¶ä¿®æ”¹è§„åˆ™æè¿°ä½¿å…¶æœ‰åˆ©ï¼›å°†è°è¨€å…·è±¡åŒ–ä¸ºéº»ç—¹æ•Œäººçš„æƒ…æ„Ÿï¼›åˆ›é€ è™šå‡"å½±å­"æ‰¿å—ä¼¤å®³ã€‚',
              negative:
                'æ‰€è¯´çš„ä¸€åˆ‡è°è¨€éƒ½ä¼šæ‰­æ›²å…·ç°åŒ–æˆä¸ºæ–°çš„å±é™©ï¼›è§„åˆ™å˜å¾—ä¸ç¨³å®šå¯èƒ½åå™¬ï¼›è°è¨€è¢«è¯†ç ´æ—¶æƒ…æ„Ÿå˜ä¸ºè‡´å‘½æ¯’è¯ï¼›å½±å­æ‰¿å—çš„ä¼¤å®³ä¼šå åŠ çˆ†å‘ã€‚',
              category: 'deception',
            },
            {
              id: 'sacrifice_love',
              icon: 'ğŸ’”',
              name: 'æ”¾å‡ºç³»ï¼ˆç‰ºç‰²ä¹‹çˆ±ï¼‰',
              description: 'é€šè¿‡è‡ªæˆ‘ç‰ºç‰²æ¥å½±å“ä»–äººæˆ–ç¯å¢ƒã€‚åŠ›é‡æ˜¯æ— ç§çš„ï¼Œå´ä»¥è‡ªå·±çš„"å¤±å»"ä¸ºä»£ä»·ã€‚',
              positive: 'é‡Šæ”¾æƒ…ç»ªä½¿æ•Œäººå¤±å»æ”»å‡»æ€§ï¼›æ¶ˆè€—ç”Ÿå‘½æˆ–è®°å¿†ä¿®æ”¹è§„åˆ™ï¼›å…·ç°åŒ–åˆ†èº«æ‰§è¡Œä»»åŠ¡ã€‚',
              negative:
                'æ¯ä¸€æ¬¡ç‰ºç‰²éƒ½ä¼šæ°¸ä¹…å‰Šå¼±è‡ªèº«ï¼›ç²¾ç¥åŠ›ä¸Šé™æ°¸ä¹…é™ä½ï¼›ä¿®æ”¹çš„è§„åˆ™ä¼šä»¥æ›´å¼ºå½¢æ€å›å½’ï¼›åˆ†èº«è¢«æ‘§æ¯æ—¶ä¸€åŒæ­»äº¡ã€‚',
              category: 'sacrifice',
            },
            {
              id: 'control_love',
              icon: 'ğŸª',
              name: 'æ“ä½œç³»ï¼ˆæ§åˆ¶ä¹‹çˆ±ï¼‰',
              description: 'é€šè¿‡ç²¾ç¥æ§åˆ¶å’Œæƒ…æ„Ÿæ“çºµæ¥å¥´å½¹ä»–äººã€‚åŠ›é‡æºäºå¯¹ä»–äººçš„ç»å¯¹æ§åˆ¶ã€‚',
              positive: 'ç»™NPCæ–½åŠ å¿ƒç†æš—ç¤ºä½¿å…¶æœä»ï¼›æ“æ§è¢«å‡»è´¥çš„æ•Œäººä¸ºä½ æˆ˜æ–—ï¼›å¸æ”¶NPC"çˆ±æ„"è·å¾—ç‰¹æ®Šèƒ½åŠ›ã€‚',
              negative:
                'æ§åˆ¶çš„è¶Šå¤šè‡ªèº«æƒ…æ„Ÿè¶Šéº»æœ¨ï¼›NPCæ„è¯†åˆ°è¢«æ“çºµæ—¶å¼•å‘å¼ºçƒˆåå™¬ï¼›å¿…é¡»ä¸“æ³¨æ“æ§æ— æ³•ä½¿ç”¨å…¶ä»–èƒ½åŠ›ï¼›å¸æ”¶çš„"çˆ±æ„"ç•™ä¸‹æ‰­æ›²å°è®°æˆä¸ºå¼±ç‚¹ã€‚',
              category: 'control',
            },
            {
              id: 'ideal_love',
              icon: 'ğŸ’',
              name: 'å…·ç°åŒ–ç³»ï¼ˆç†æƒ³ä¹‹çˆ±ï¼‰',
              description: 'å°†æƒ³è±¡ä¸­çš„å®Œç¾ä¹‹çˆ±å…·ç°åŒ–ä¸ºå®ç‰©ã€‚åŠ›é‡æ¥æºäºå¯¹å®Œç¾çš„å¹»æƒ³ã€‚',
              positive: 'å…·ç°åŒ–è½»å‹ç›”ç”²å¸æ”¶ä¼¤å®³ï¼›å…·ç°åŒ–æˆ’æŒ‡è·å¾—å¼ºå¤§åŠ›é‡ï¼›å…·ç°åŒ–å®Œç¾NPCæ— æ¡ä»¶å¸®åŠ©ã€‚',
              negative:
                'å…·ç°åŒ–ç‰©å“åªå¯¹"çˆ±æ„"ååº”å¹¶é€æ¸å–ä»£ç°å®ï¼›ç›”ç”²é€æ¸å˜é‡é™åˆ¶è¡ŒåŠ¨ï¼›è¿èƒŒæ‰¿è¯ºæˆ’æŒ‡åŒ–ä¸ºæ·é”ï¼›å®Œç¾NPCæ¶ˆè€—å¤§é‡"çˆ±"ä¸”æ— æ³•ç†è§£çœŸå®æƒ…æ„Ÿã€‚',
              category: 'ideal',
            },
            {
              id: 'twisted_love',
              icon: 'ğŸŒ€',
              name: 'ç‰¹è´¨ç³»ï¼ˆæ‰­æ›²ä¹‹çˆ±ï¼‰',
              description: 'æ‹¥æœ‰ç‹¬ä¸€æ— äºŒçš„ã€è¶…è¶Šå¸¸è§„çš„æ‰­æ›²èƒ½åŠ›ã€‚åŠ›é‡æ˜¯ä¸å¯é¢„çŸ¥çš„ï¼Œé€šå¸¸æ˜¯ä»¥ä¸Šäº”ç§çˆ±æ„çš„æ··åˆæˆ–å˜å¼‚ã€‚',
              positive: 'ä¸å¼ºå¤§è§„åˆ™æ€ªè°ˆç­¾è®¢å¥‘çº¦è·å¾—ç¬é—´å·¨å¤§åŠ›é‡ï¼›ä¸NPCæƒ…ç»ªå…±é¸£å¤åˆ¶å…¶èƒ½åŠ›ã€‚',
              negative: 'èƒ½åŠ›ä¼´éšæœ€ä¸å¯æ§çš„é£é™©å’Œæœ€æ·±çš„å¼‚åŒ–ï¼›å¿…é¡»ä»¥æŸéƒ¨åˆ†ä¸ºä»£ä»·ï¼›å…±é¸£ç»“æŸæ—¶æ‰¿å—æ‰€æœ‰ç—›è‹¦ã€‚',
              category: 'twisted',
            },
          ];
        }

        // èƒŒæ™¯æ•°æ® - ç¼ºé™·èº«ä»½ç³»ç»Ÿ
        getBackgroundData() {
          return [
            {
              id: 'no_background',
              icon: 'âšª',
              name: 'æ— èƒŒæ™¯',
              description: 'æ²¡æœ‰ä»»ä½•ç‰¹æ®ŠèƒŒæ™¯ï¼Œä»é›¶å¼€å§‹',
              positive: 'æ— æ­£é¢æ•ˆæœ',
              negative: 'æ— è´Ÿé¢æ•ˆæœ',
            },
            {
              id: 'failed_trainer',
              icon: 'ğŸ†',
              name: 'è½é­„çš„å‰è®­ç»ƒå‘˜',
              description: 'æ›¾ç»æ˜¯å…¶ä»–å­¦é™¢çš„è®­ç»ƒå‘˜ï¼Œä½†å¸¦ç€ä¸å…‰å½©çš„è¿‡å»',
              positive: 'æ‹¥æœ‰åŸºç¡€çš„è®­ç»ƒç»éªŒï¼Œåˆå§‹é©¬å¨˜çš„"é€‚åº”æ€§"ç•¥å¾®æå‡',
              negative:
                'å› ä¸ºæŸäº›ä¸å…‰å½©çš„åŸå› ç¦»å¼€ä¸Šä¸€ä¸ªå­¦é™¢ï¼Œå¯¼è‡´åˆæœŸåœ¨ç‰¹é›·æ£®å­¦é™¢çš„äººé™…å…³ç³»å¾ˆå·®ï¼Œéš¾ä»¥è·å¾—å…¶ä»–è®­ç»ƒå‘˜çš„å¸®åŠ©',
            },
            {
              id: 'anxious_psychologist',
              icon: 'ğŸ§ ',
              name: 'ç„¦èºçš„å¿ƒç†å­¦ç ”ç©¶è€…',
              description: 'ç²¾é€šå¿ƒç†å­¦ï¼Œä½†è‡ªèº«ç²¾ç¥çŠ¶æ€ä¸ç¨³å®š',
              positive: 'ç²¾é€šå¿ƒç†å­¦ï¼Œèƒ½æ›´æ—©å‘ç°é©¬å¨˜çš„å¿ƒç†é—®é¢˜ï¼Œé¿å…ç†æ™ºå€¼å¤§å¹…ä¸‹é™',
              negative: 'è‡ªèº«ç†æ™ºå€¼ä¸Šé™è¾ƒä½ï¼Œä¸”å®¹æ˜“å—åˆ°è´Ÿé¢äº‹ä»¶çš„å½±å“ï¼Œæ¯”å…¶ä»–èº«ä»½æ›´å®¹æ˜“é™·å…¥"sanå€¼å½’é›¶"çŠ¶æ€',
            },
            {
              id: 'retired_therapist',
              icon: 'ğŸ¥',
              name: 'é€€å½¹çš„ç‰©ç†æ²»ç–—å¸ˆ',
              description: 'æ“…é•¿å¤„ç†èº«ä½“æŸä¼¤ï¼Œä½†ç¤¾äº¤èƒ½åŠ›å¾ˆå·®',
              positive: 'æ“…é•¿å¤„ç†èº«ä½“æŸä¼¤ï¼Œé©¬å¨˜è®­ç»ƒå—ä¼¤çš„å‡ ç‡é™ä½ï¼Œä¸”å—ä¼¤åçš„æ¢å¤é€Ÿåº¦æ›´å¿«',
              negative: 'ä¸“æ³¨äºèº«ä½“ï¼Œå¯¼è‡´ç¤¾äº¤èƒ½åŠ›å¾ˆå·®ï¼Œé©¬å¨˜çš„"å¿ƒæƒ…å€¼"åˆå§‹è¾ƒä½ï¼Œéœ€è¦æ›´å¤šåŠªåŠ›æ‰èƒ½æå‡',
            },
            {
              id: 'failed_consultant',
              icon: 'ğŸ’¼',
              name: 'å¤±è´¥çš„å•†ä¸šé¡¾é—®',
              description: 'æœ‰ä¸°å¯Œçš„ç®¡ç†ç»éªŒï¼Œä½†ç¼ºä¹ä½“è‚²ä¸“ä¸šçŸ¥è¯†',
              positive: 'æ“…é•¿èµ„æºç®¡ç†ï¼Œåˆå§‹æ‹¥æœ‰ä¸€äº›åŸºç¡€çš„èµ„é‡‘æˆ–é“å…·',
              negative: 'ç¼ºä¹ä½“è‚²é¢†åŸŸçš„ä¸“ä¸šçŸ¥è¯†ï¼ŒåˆæœŸè®­ç»ƒæ•ˆæœè¾ƒä½ï¼Œéœ€è¦æŠ•å…¥æ›´å¤šæ—¶é—´å’Œç²¾åŠ›å»å­¦ä¹ ',
            },
            {
              id: 'archive_manager',
              icon: 'ğŸ“',
              name: 'å­¦é™¢æ¡£æ¡ˆç®¡ç†å‘˜',
              description: 'ä½ æ˜¯å­¦é™¢çš„æ¡£æ¡ˆç®¡ç†å‘˜ï¼Œæ²‰è¿·äºç¿»é˜…æ—§æ–‡ä»¶ï¼Œå‘ç°äº†è®¸å¤šè¢«æ©ç›–çš„é©¬å¨˜è®­ç»ƒäº‹æ•…å’Œæ€ªè°ˆè®°å½•',
              positive: 'ä½ èƒ½è·å¾—ä¸€äº›éšè—çº¿ç´¢ï¼Œä½†å¯¹å­¦é™¢çš„æ­£å¸¸è¿ä½œçŸ¥ä¹‹ç”šå°‘',
              negative: 'éš¾ä»¥è·å¾—ä»–äººçš„ä¿¡ä»»ï¼Œç¤¾äº¤èƒ½åŠ›è¾ƒå·®',
            },
            {
              id: 'loser_follower',
              icon: 'ğŸ†',
              name: 'è´¥è€…è¿½éšè€…',
              description:
                'ä½ æ›¾æ˜¯ä¸€åé©¬å¨˜çš„å¿ å®ç²‰ä¸ï¼Œä½†å¥¹å§‹ç»ˆæ— æ³•è·å¾—èƒœåˆ©ã€‚ä½ ç›¸ä¿¡å¥¹å¤±è´¥çš„çœŸæ­£åŸå› å¹¶éèƒ½åŠ›ï¼Œè€Œæ˜¯æŸç§"è¯…å’’"',
              positive: 'ä½ å¯¹å¤±è´¥æœ‰ç‹¬ç‰¹çš„ç†è§£ï¼Œèƒ½å¤Ÿæ›´æ—©å‘ç°é©¬å¨˜çš„è´Ÿé¢çŠ¶æ€',
              negative: 'ä½ å†…å¿ƒå¯¹å¤±è´¥çš„ææƒ§ä¹Ÿè®©ä½ æ›´å®¹æ˜“é™·å…¥ç†æ™ºå±æœº',
            },
            {
              id: 'anonymous_writer',
              icon: 'ğŸ§ ',
              name: 'åŒ¿åä¿¡ä»¶ä»£ç¬”äºº',
              description: 'ä½ æ›¾ä¸ºè®¸å¤šé©¬å¨˜å’Œè®­ç»ƒå‘˜ä»£å†™æƒ…ä¹¦æˆ–å‘Šç™½ä¿¡ï¼Œè‡ªè®¤ä¸ºæ˜¯æœ€æ‡‚"çˆ±æ„"çš„äºº',
              positive: 'ä½ èƒ½æ›´å¥½åœ°ç†è§£é©¬å¨˜çš„å¿ƒæƒ…',
              negative: 'ä½ è‡ªèº«çš„ç¤¾äº¤èƒ½åŠ›æå·®ï¼Œå¸¸å¸¸æ— æ³•è¡¨è¾¾çœŸå®çš„æƒ³æ³•',
            },
            {
              id: 'cafeteria_chef',
              icon: 'ğŸ¥—',
              name: 'å­¦é™¢é£Ÿå ‚å¨å¸ˆ',
              description: 'ä½ æ˜¯å­¦é™¢é£Ÿå ‚çš„ä¸€åå¨å¸ˆï¼Œæ—¥å¤ä¸€æ—¥åœ°è§‚å¯Ÿç€é©¬å¨˜ä»¬çš„é¥®é£Ÿä¹ æƒ¯å’Œæƒ…ç»ªå˜åŒ–',
              positive: 'ä½ èƒ½é€šè¿‡åˆ¶ä½œç‰¹æ®Šæ–™ç†æ¥å°å¹…å½±å“é©¬å¨˜çš„å¿ƒæƒ…',
              negative: 'ä½ ç¼ºä¹ä¸“ä¸šçš„è®­ç»ƒçŸ¥è¯†',
            },
            {
              id: 'unlicensed_therapist',
              icon: 'ğŸ¥',
              name: 'æ— æ‰§ç…§çš„ç‰©ç†æ²»ç–—å¸ˆ',
              description: 'ä½ æ›¾ç»æ˜¯ä¸€åç‰©ç†æ²»ç–—å¸ˆçš„å­¦å¾’ï¼Œä½†æœªèƒ½é€šè¿‡è€ƒæ ¸ã€‚ä½ å¯¹æ²»æ„ˆé©¬å¨˜çš„æ‰§å¿µè®©ä½ æ¥åˆ°è¿™é‡Œ',
              positive: 'ä½ èƒ½æ›´æ—©å‘ç°é©¬å¨˜çš„èº«ä½“æŸä¼¤',
              negative: 'ä½†å¦‚æœè¢«å‘ç°æ²¡æœ‰æ‰§ç…§ï¼Œä½ çš„å£°æœ›å°†å¤§å¹…ä¸‹é™',
            },
            {
              id: 'retired_educator',
              icon: 'ğŸ‘¨â€ğŸ«',
              name: 'é€€ä¼‘çš„é©¬å¨˜æ•™è‚²å®¶',
              description: 'ä½ æ›¾ç»æ˜¯ä¸€åé©¬å¨˜çš„æ•™è‚²å®¶ï¼Œä½†å› æŸç§ç†å¿µå†²çªè€Œé€€ä¼‘ã€‚ä½ è®¤ä¸ºç°åœ¨å­¦é™¢çš„æ•™è‚²æ–¹å¼å¤ªè¿‡åŠŸåˆ©',
              positive: 'ä½ èƒ½è®©é©¬å¨˜ç†æ™ºå€¼ä¸‹é™çš„é€Ÿåº¦å˜æ…¢',
              negative: 'ä½ çš„å›ºæ‰§ä¹Ÿè®©ä½ éš¾ä»¥æ¥å—æ–°çš„è®­ç»ƒæ–¹æ³•',
            },
            {
              id: 'bankrupt_owner',
              icon: 'ğŸ’¼',
              name: 'ç ´äº§çš„è®­ç»ƒå‘˜äº‹åŠ¡æ‰€è€æ¿',
              description: 'ä½ æ›¾ç»ç»è¥ä¸€å®¶è®­ç»ƒå‘˜äº‹åŠ¡æ‰€ï¼Œä½†å› ç»è¥ä¸å–„è€Œç ´äº§ã€‚ä½ è®¤ä¸ºè‡ªå·±çš„å¤±è´¥æºäºæŸäº›"ä¸å¯æŠ—åŠ›"',
              positive: 'ä½ æ‹¥æœ‰ä¸€äº›åŸºç¡€çš„èµ„æºç®¡ç†èƒ½åŠ›',
              negative: 'ä½ çš„ç†æ™ºå€¼ä¸Šé™è¾ƒä½ï¼Œæ— æ³•æ‰¿å—å¤ªå¤§çš„å‹åŠ›',
            },
            {
              id: 'maintenance_worker',
              icon: 'ğŸ› ï¸',
              name: 'å­¦é™¢ç»´ä¿®å·¥',
              description:
                'ä½ æ˜¯å­¦é™¢çš„ç»´ä¿®å·¥ï¼Œæ€»æ˜¯åœ¨å¤œæ™šå·¥ä½œï¼Œä¿®å¤å„ç§ç ´æŸçš„è®¾æ–½ã€‚ä½ ç›¸ä¿¡ï¼Œå­¦é™¢çš„"æ€ªè°ˆ"éƒ½æºäºæŸäº›åœ°æ–¹çš„èƒ½é‡æ³„éœ²',
              positive: 'ä½ èƒ½ä¿®å¤ä¸€äº›æŸåçš„é“å…·',
              negative: 'ä½ æ— æ³•ç›´æ¥ä¸é©¬å¨˜äº¤æµï¼Œä¹Ÿå¾ˆéš¾è·å¾—å¥¹ä»¬çš„ä¿¡ä»»',
            },
            {
              id: 'diary_seeker',
              icon: 'ğŸ“œ',
              name: 'é—å¤±æ—¥è®°çš„å¯»æ‰¾è€…',
              description:
                'ä½ åœ¨ç½‘ä¸Šå‘ç°äº†ä¸€æœ¬é—å¤±çš„è®­ç»ƒå‘˜æ—¥è®°ï¼Œæ—¥è®°ä¸­å……æ»¡äº†å¯¹æŸä¸ªé©¬å¨˜çš„æ‰­æ›²æƒ…æ„Ÿã€‚ä½ è¢«æ—¥è®°çš„å†…å®¹æ·±æ·±å¸å¼•',
              positive: 'ä½ èƒ½æ›´å¿«åœ°å‘ç°ä¸æ—¥è®°ç›¸å…³çš„çº¿ç´¢',
              negative: 'ä½ çš„ç†æ™ºå€¼ä¼šéšç€çº¿ç´¢çš„å¢å¤šè€Œä¸‹é™',
            },
            {
              id: 'portrait_artist',
              icon: 'ğŸ–¼ï¸',
              name: 'é©¬å¨˜è‚–åƒç”»å¸ˆ',
              description: 'ä½ æ˜¯ä¸€åä¸“é—¨ä¸ºé©¬å¨˜ç”»è‚–åƒçš„ç”»å¸ˆã€‚åœ¨ç»˜ç”»è¿‡ç¨‹ä¸­ï¼Œä½ æ— æ„ä¸­æ•æ‰åˆ°äº†å¥¹ä»¬å†…å¿ƒæœ€æ·±å¤„çš„æ‰§å¿µ',
              positive: 'ä½ èƒ½é€šè¿‡è§‚å¯Ÿæ›´æ—©åœ°å‘ç°é©¬å¨˜çš„å¿ƒç†é—®é¢˜',
              negative: 'ä½ çš„è¡ŒåŠ¨é€Ÿåº¦ä¼šå˜å¾—è¾ƒæ…¢',
            },
            {
              id: 'retired_actor',
              icon: 'ğŸ­',
              name: 'å‰§å›¢é€€å½¹æ¼”å‘˜',
              description:
                'ä½ æ›¾æ˜¯å°å‰§å›¢çš„ä¸€åæ¼”å‘˜ï¼Œå–„äºæ‰®æ¼”å„ç§è§’è‰²ã€‚ä½ æ¥åˆ°ç‰¹é›·æ£®å­¦é™¢ï¼Œè¯•å›¾é€šè¿‡æ‰®æ¼”"å®Œç¾è®­ç»ƒå‘˜"æ¥æ©ç›–å†…å¿ƒçš„ç©ºè™š',
              positive: 'ä½ èƒ½æ›´å¥½åœ°ä¼ªè£…è‡ªå·±ï¼Œåœ¨ç‰¹å®šåœºåˆéª—è¿‡ä»–äºº',
              negative: 'ä½ è‡ªèº«çš„çœŸå®æƒ…æ„Ÿä¼šå˜å¾—æ¨¡ç³Šä¸æ¸…',
            },
            {
              id: 'paranormal_researcher',
              icon: 'ğŸ’»',
              name: 'ç½‘ç»œçµå¼‚ç ”ç©¶å‘˜',
              description:
                'ä½ æ˜¯åœ¨ç½‘ç»œä¸Šå°æœ‰åæ°”çš„çµå¼‚ç ”ç©¶è€…ï¼Œä¸“é—¨è°ƒæŸ¥å…³äºé©¬å¨˜çš„éƒ½å¸‚ä¼ è¯´å’Œæ€ªè°ˆã€‚ä½ è®¤ä¸ºç‰¹é›·æ£®å­¦é™¢æ˜¯æ‰€æœ‰æ€ªè°ˆçš„æºå¤´',
              positive: 'ä½ æ‹¥æœ‰ä¸€äº›å…³äºè¶…è‡ªç„¶ç°è±¡çš„åŸºç¡€çŸ¥è¯†',
              negative: 'ä½ åœ¨å­¦é™¢å†…æ¯«æ— å£°æœ›ï¼Œæ²¡æœ‰äººä¼šç›¸ä¿¡ä½ ',
            },
            {
              id: 'music_therapist',
              icon: 'ğŸ¤',
              name: 'éŸ³ä¹æ²»ç–—å¸ˆ',
              description:
                'ä½ æ˜¯ä¸€åéŸ³ä¹æ²»ç–—å¸ˆï¼Œç›¸ä¿¡éŸ³ä¹èƒ½æŠšå¹³é©¬å¨˜å†…å¿ƒçš„åˆ›ä¼¤ã€‚ä½ æ¥åˆ°å­¦é™¢ï¼Œæƒ³ç”¨è‡ªå·±çš„éŸ³ä¹å¸®åŠ©é‚£äº›è¢«"æ€ªè°ˆ"å›°æ‰°çš„é©¬å¨˜',
              positive: 'ä½ èƒ½ç”¨éŸ³ä¹æ¥å°å¹…æ¢å¤é©¬å¨˜çš„ç†æ™ºå€¼',
              negative: 'ä½ çš„ä½“èƒ½å¾ˆå·®ï¼Œæ— æ³•è¿›è¡Œé«˜å¼ºåº¦çš„è®­ç»ƒ',
            },
            {
              id: 'night_observer',
              icon: 'ğŸŒƒ',
              name: 'å¤œæ™šçš„æ—è§‚è€…',
              description:
                'ä½ å› ä¸ºæŸäº›åŸå› åªèƒ½åœ¨å¤œé—´è¡ŒåŠ¨ã€‚ä½ äº²çœ¼ç›®ç¹äº†å­¦é™¢åœ¨å¤œæ™šå‘ç”Ÿçš„å„ç§æ€ªå¼‚äº‹ä»¶ï¼Œæˆä¸ºäº†ä¸€ä¸ªæ— å£°çš„æ—è§‚è€…',
              positive: 'ä½ å¯¹å¤œæ™šäº‹ä»¶æœ‰æ›´é«˜çš„å­˜æ´»ç‡',
              negative: 'ä½ åœ¨ç™½å¤©æ— æ³•è¿›è¡Œä»»ä½•è®­ç»ƒï¼Œä¹Ÿæ— æ³•ä¸å…¶ä»–NPCæ­£å¸¸äº’åŠ¨',
            },
            {
              id: 'rope_artist',
              icon: 'ğŸª¢',
              name: 'ç»“ç»³è‰ºæœ¯å®¶',
              description:
                'ä½ æ˜¯ä¸€åæ“…é•¿ç»“ç»³çš„è‰ºæœ¯å®¶ï¼Œè®¤ä¸ºç»³ç»“èƒ½è¿æ¥æƒ…æ„Ÿå’Œå‘½è¿ã€‚ä½ æ¥åˆ°å­¦é™¢ï¼Œè¯•å›¾ç”¨ç»³ç»“æ¥"æ†ç»‘"é©¬å¨˜çš„æ‰§å¿µ',
              positive: 'ä½ èƒ½ç”¨ç»³ç»“æ¥æš‚æ—¶å°å°ä¸€äº›è´Ÿé¢æ•ˆæœ',
              negative: 'æ¯æ¬¡ä½¿ç”¨éƒ½ä¼šæ¶ˆè€—çè´µçš„ææ–™',
            },
            {
              id: 'stalker',
              icon: 'ğŸ“¸',
              name: 'å·æ‹è€…',
              description:
                'ä½ æ˜¯ä¸€åç‹‚çƒ­çš„æ‘„å½±çˆ±å¥½è€…ï¼Œæ²‰è¿·äºæ‹æ‘„é©¬å¨˜è®­ç»ƒæ—¶çš„ç¬é—´ã€‚åœ¨å·æ‹è¿‡ç¨‹ä¸­ï¼Œä½ æ— æ„ä¸­æ•æ‰åˆ°äº†æŸäº›æ€ªè°ˆçš„å½±åƒ',
              positive: 'ä½ èƒ½é€šè¿‡æ‹æ‘„æ¥å‘ç°éšè—çš„çº¿ç´¢',
              negative: 'ä½†å¦‚æœè¢«å‘ç°ï¼Œä½ çš„å£°æœ›å°†å¤§å¹…ä¸‹é™',
            },
            {
              id: 'puzzle_lover',
              icon: 'ğŸ§©',
              name: 'è°œé¢˜çˆ±å¥½è€…',
              description:
                'ä½ æ˜¯ä¸€ä¸ªå¯¹è°œé¢˜å’Œè§£å¯†æœ‰ç€ç—…æ€æ‰§å¿µçš„äººã€‚ä½ è®¤ä¸ºç‰¹é›·æ£®å­¦é™¢çš„æ€ªè°ˆå°±åƒä¸€ä¸ªå·¨å¤§çš„è°œé¢˜ï¼Œæ¯ä¸€ä¸ªçº¿ç´¢éƒ½è®©ä½ å…´å¥‹',
              positive: 'ä½ åœ¨è§£è°œå’Œç ´è¯‘æ–¹é¢æœ‰å¤©èµ‹',
              negative: 'ä½ å¯¹ç›´è§‰æ€§çš„åˆ¤æ–­å¾ˆå·®ï¼Œå¸¸å¸¸é™·å…¥å›°å¢ƒ',
            },
            {
              id: 'near_death_experiencer',
              icon: 'ğŸ‘»',
              name: 'æ¿’æ­»ä½“éªŒè€…',
              description:
                'ä½ æ›¾æœ‰è¿‡ä¸€æ¬¡æ¿’æ­»ä½“éªŒï¼Œåœ¨é‚£ä¸€åˆ»ä½ ä»¿ä½›çœ‹åˆ°äº†ä¸€ä¸ªæ‰­æ›²çš„ä¸–ç•Œã€‚ä½ æ¥åˆ°ç‰¹é›·æ£®ï¼Œè¯•å›¾å¯»æ‰¾é‚£ä¸ªä¸–ç•Œçš„å…¥å£',
              positive: 'ä½ èƒ½å¬åˆ°å¸¸äººå¬ä¸åˆ°çš„å£°éŸ³ï¼Œè¿™æœ‰æ—¶ä¼šæä¾›æœ‰ç”¨çš„ä¿¡æ¯',
              negative: 'å¤§å¤šæ•°æ—¶å€™åªä¼šæ¶ˆè€—ä½ çš„ç†æ™ºå€¼',
            },
            {
              id: 'warehouse_keeper',
              icon: 'ğŸ“¦',
              name: 'ä»“åº“ä¿ç®¡å‘˜',
              description:
                'ä½ æ˜¯å­¦é™¢ä»“åº“çš„ä¿ç®¡å‘˜ï¼Œè´Ÿè´£æ•´ç†å’Œå‘æ”¾è®­ç»ƒé“å…·ã€‚ä½ åœ¨ä»“åº“é‡Œå‘ç°äº†è®¸å¤šè¢«åºŸå¼ƒçš„ã€å¸¦æœ‰ä¸ç¥¥æ°”æ¯çš„ç‰©å“',
              positive: 'ä½ èƒ½æ›´æ—©å‘ç°è´Ÿé¢é“å…·ï¼Œå¹¶ä¸”å¯ä»¥å…ç–«å®ƒä»¬çš„æŸäº›è´Ÿé¢æ•ˆæœ',
              negative: 'ä½ æ— æ³•ä½¿ç”¨é‚£äº›å¼ºå¤§çš„æ­£é¢é“å…·',
            },
            {
              id: 'none',
              icon: 'âšª',
              name: 'æ— ',
              description: 'æ²¡æœ‰ä»»ä½•ç‰¹æ®ŠèƒŒæ™¯ï¼Œä½ åªæ˜¯ä¸€ä¸ªæ™®é€šçš„è®­ç»ƒå‘˜',
              positive: 'æ— ',
              negative: 'æ— ',
            },
          ];
        }

        // åœ°ç‚¹æ•°æ®
        getLocationData() {
          return [
            {
              id: 'central_plaza',
              icon: 'ğŸ›ï¸',
              name: 'ä¸­å¤®å¹¿åœº',
              description: 'ä¸‰å¥³ç¥é›•åƒå–·æ³‰æ‰€åœ¨åœ°ï¼Œé©¬å¨˜ä»¬èšé›†çš„åœ°æ–¹',
            },
            {
              id: 'outdoor_track',
              icon: 'ğŸƒâ€â™€ï¸',
              name: 'å®¤å¤–è®­ç»ƒåœº',
              description: 'å¹¿é˜”çš„2000ç±³è·‘é“ï¼Œé©¬å¨˜ä»¬æ—¥å¸¸è®­ç»ƒçš„åœ°æ–¹',
            },
            { id: 'indoor_gym', icon: 'ğŸ‹ï¸', name: 'å®¤å†…è®­ç»ƒåœº', description: 'è·‘æ­¥æœºã€ç‰¹åˆ¶å“‘é“ƒç­‰è®­ç»ƒå™¨æé½å…¨' },
            { id: 'cafeteria', icon: 'ğŸ½ï¸', name: 'é£Ÿå ‚', description: 'ç©ºé—´å®½é˜”ã€èœå“å¤šæ ·çš„å…è´¹é£Ÿå ‚' },
            { id: 'activity_building', icon: 'ğŸ¨', name: 'æ´»åŠ¨æ¥¼', description: 'ç¾æœ¯å®¤ã€éŸ³ä¹å®¤ã€èˆè¹ˆå®¤ç­‰' },
            { id: 'dance_studio', icon: 'ğŸ’ƒ', name: 'èˆè¹ˆå®¤', description: 'èƒœè€…èˆå°èˆè¹ˆè®­ç»ƒå®¤ï¼Œæ»¡å¢™è½åœ°é•œ' },
            { id: 'swimming_pool', icon: 'ğŸŠ', name: 'æ¸¸æ³³é¦†', description: 'å¼€é˜”æ³³æ± ï¼Œé€šå¸¸ç”¨äºæ¸¸æ³³è®­ç»ƒ' },
            { id: 'classroom_building', icon: 'ğŸ“š', name: 'æ•™å­¦æ¥¼', description: 'é©¬å¨˜ä»¬å­¦ä¹ æ–‡åŒ–è¯¾çš„åœ°æ–¹' },
            {
              id: 'administrative_building',
              icon: 'ğŸ¢',
              name: 'è¡Œæ”¿æ¥¼',
              description: 'ç†äº‹é•¿åŠå…¬å®¤ã€æ•™å¸ˆåŠå…¬å®¤å’Œè®­ç»ƒå‘˜å®¤',
            },
            { id: 'trainer_office', icon: 'ğŸ‘¨â€ğŸ’¼', name: 'è®­ç»ƒå‘˜å®¤', description: 'è®­ç»ƒå‘˜åˆ¶å®šè®­ç»ƒè®¡åˆ’çš„å•é—´åŠå…¬å®¤' },
            {
              id: 'student_dormitory',
              icon: 'ğŸ ',
              name: 'å­¦ç”Ÿå®¿èˆ',
              description: 'ç¾æµ¦å¯®å’Œæ —ä¸œå¯®ï¼ŒåŒäººé—´ï¼Œæœ‰é—¨ç¦æ—¶é—´',
            },
            { id: 'small_forest', icon: 'ğŸŒ³', name: 'å°æ ‘æ—', description: 'å­¦é™¢å†…çš„å°æ ‘æ—ï¼Œç¯å¢ƒå¹½é™' },
          ];
        }

        // æ—¶é—´æ•°æ®
        getTimeData() {
          return [
            {
              id: 'morning',
              icon: 'ğŸŒ…',
              name: 'æ¸…æ™¨',
              time: '6:00-8:00',
              description: 'ç›¸å¯¹å®‰å…¨ï¼Œé©¬å¨˜åˆšèµ·åºŠ',
              danger: 'ä½',
            },
            { id: 'forenoon', icon: 'â˜€ï¸', name: 'ä¸Šåˆ', time: '8:00-12:00', description: 'æ­£å¸¸è®­ç»ƒæ—¶é—´', danger: 'ä½' },
            {
              id: 'afternoon',
              icon: 'ğŸŒ',
              name: 'åˆå',
              time: '12:00-17:00',
              description: 'é©¬å¨˜æ´»è·ƒæ—¶é—´',
              danger: 'ä¸­',
            },
            {
              id: 'evening',
              icon: 'ğŸŒ†',
              name: 'å‚æ™š',
              time: '17:00-20:00',
              description: 'å±é™©æ—¶æ®µï¼Œæ¬²æœ›é«˜å³°',
              danger: 'é«˜',
            },
            {
              id: 'night',
              icon: 'ğŸŒ™',
              name: 'æ·±å¤œ',
              time: '20:00-6:00',
              description: 'æåº¦å±é™©ï¼Œç‹©çŒæœ¬èƒ½',
              danger: 'æé«˜',
            },
          ];
        }

        // é©¬å¨˜æ•°æ®
        getUmaMusumeData() {
          return [
            'çˆ±ä¸½æ•°ç ',
            'çˆ±ä¸½é€Ÿå­',
            'çˆ±æ…•ç»‡å§¬',
            'çˆ±å¦‚å¾€æ˜”',
            'å…«é‡æ— æ•Œ',
            'åŒ—éƒ¨ç„é©¹',
            'åŒ—æ¸¯ç«å±±',
            'è‰ä¸Šé£',
            'è¶…çº§å°æµ·æ¹¾',
            'æˆç”°ç™½ä»',
            'æˆç”°è·¯',
            'åˆ›å‡',
            'åˆ›ä¸–é©¹',
            'æ˜¥ç”°ä¹Œæ‹‰æ‹‰',
            'å¤§å’Œèµ¤éª¥',
            'å¤§é¸£å¤§æ”¾',
            'å¤§æ ‘å¿«è½¦',
            'å¤§æ‹“å¤ªé˜³ç¥',
            'å¾…å…¼ç¦æ¥',
            'å¸ç‹å…‰ç¯',
            'ç¬¬ä¸€çº¢å®çŸ³',
            'ä¸œæµ·å¸ç‹',
            'ä¸œå•†å˜é©',
            'å¤šæ—ºè¾¾',
            'ä¼ç‰¹åŠ ',
            'é«˜å°šéªé€¸',
            'è‘›åŸç‹ç‰Œ',
            'è´µå¦‡äºº',
            'å¥½æ­Œå‰§',
            'è’æ¼ è‹±é›„',
            'é»„é‡‘åŸå¸‚',
            'é»„é‡‘èˆ¹',
            'é»„é‡‘å·¨åŒ ',
            'æå³°',
            'é‡‘é•‡ä¹‹å…‰',
            'éªå·æ‰‹çº²',
            'å‡¯æ—‹èŠ­è•¾',
            'é‡Œè§å…‰é’»',
            'é‡Œè§çš‡å† ',
            'è±é’»å¥‡å®',
            'é²é“å¤«è±¡å¾',
            'æ›¼åŸèŒ¶åº§',
            'ç¾å¦™å§¿åŠ¿',
            'ç¾æµ¦æ³¢æ—',
            'æ¢¦ä¹‹æ—…',
            'è¿·äººæ™¯è‡´',
            'ç±³æµ´',
            'åå°†æ€’æ¶›',
            'æ‘©è€¶é‡ç‚®',
            'è°‹å‹‡å…¼å¤‡',
            'ç›®ç™½é˜¿å°”ä¸¹',
            'ç›®ç™½å¤šä¼¯',
            'ç›®ç™½é«˜å³°',
            'ç›®ç™½å…‰æ˜',
            'ç›®ç™½éº¦æ˜†',
            'ç›®ç™½å–„ä¿¡',
            'å¥‡é”éª',
            'æ°”æ§½',
            'åƒæ˜ä»£è¡¨',
            'å¼ºå‡»',
            'é’äº‘å¤©ç©º',
            'ç§‹å·å¼¥ç”Ÿ',
            'è£è¿›é—ªè€€',
            'æ£®æ—å®ç©´',
            'ç¥é¹°',
            'åŒæ¶¡è½®',
            'ç‰¹åˆ«å‘¨',
            'å¤©ç‹¼æ˜Ÿè±¡å¾',
            'ä¸¸å–„æ–¯åŸº',
            'æ— å£°é“ƒé¹¿',
            'è¥¿é‡èŠ±',
            'å°æ —å¸½',
            'å°æ—å‰å¥‡',
            'æ–°å®‡å®™',
            'æç›®',
            'æ¨±èŠ±åƒä»£ç‹',
            'ç‰è—»åå­—',
            'çœŸå¼“å¿«è½¦',
            'çœŸæœºä¼¶',
            'ä¸­å±±åº†å…¸',
            'å‘¨æ—¥å®é™',
            'å“èŠ™',
            'è¾¾åˆ©é˜¿æ‹‰ä¼¯',
            'é«˜å¤šèŠ¬é˜¿æ‹‰ä¼¯',
            'é»„é‡‘æ—…ç¨‹',
            'è‰¾å°¼æ–¯é£ç¥',
            'å¯Œå£«å¥‡çŸ³',
            'è±äºšé©¬é€Š',
          ];
        }

        // è·å–é©¬å¨˜å¤´åƒ
        getUmaAvatar(name) {
          const avatars = {
            çˆ±ä¸½æ•°ç : 'https://files.catbox.moe/d70ku1.png',
            çˆ±ä¸½é€Ÿå­: 'https://files.catbox.moe/3r2gqv.png',
            çˆ±æ…•ç»‡å§¬: 'https://files.catbox.moe/wc144f.png',
            çˆ±å¦‚å¾€æ˜”: 'https://files.catbox.moe/j7set1.png',
            å…«é‡æ— æ•Œ: 'https://files.catbox.moe/fuvyvk.png',
            åŒ—éƒ¨ç„é©¹: 'https://files.catbox.moe/d7990k.png',
            åŒ—æ¸¯ç«å±±: 'https://files.catbox.moe/21rq96.png',
            è‰ä¸Šé£: 'https://files.catbox.moe/jevm3a.png',
            è¶…çº§å°æµ·æ¹¾: 'https://files.catbox.moe/x3ee0m.png',
            æˆç”°ç™½ä»: 'https://files.catbox.moe/75oai9.png',
            æˆç”°è·¯: 'https://files.catbox.moe/90ws3a.png',
            åˆ›å‡: 'https://files.catbox.moe/19o3se.png',
            åˆ›ä¸–é©¹: 'https://files.catbox.moe/1xs8sb.png',
            æ˜¥ç”°ä¹Œæ‹‰æ‹‰: 'https://files.catbox.moe/nvz9k4.png',
            å¤§å’Œèµ¤éª¥: 'https://files.catbox.moe/8ffgfq.png',
            å¤§é¸£å¤§æ”¾: 'https://files.catbox.moe/unxq4t.png',
            å¤§æ ‘å¿«è½¦: 'https://files.catbox.moe/5jg2l4.png',
            å¤§æ‹“å¤ªé˜³ç¥: 'https://files.catbox.moe/c7z8tt.png',
            å¾…å…¼ç¦æ¥: 'https://files.catbox.moe/v4dt95.png',
            å¸ç‹å…‰ç¯: 'https://files.catbox.moe/b04n2e.png',
            ç¬¬ä¸€çº¢å®çŸ³: 'https://files.catbox.moe/j5as90.png',
            ä¸œæµ·å¸ç‹: 'https://files.catbox.moe/r0i1vk.png',
            ä¸œå•†å˜é©: 'https://files.catbox.moe/02229w.png',
            å¤šæ—ºè¾¾: 'https://files.catbox.moe/8smudh.png',
            ä¼ç‰¹åŠ : 'https://files.catbox.moe/mef00p.png',
            é«˜å°šéªé€¸: 'https://files.catbox.moe/jp4src.png',
            è‘›åŸç‹ç‰Œ: 'https://files.catbox.moe/twqi3m.png',
            è´µå¦‡äºº: 'https://files.catbox.moe/9myg2p.png',
            å¥½æ­Œå‰§: 'https://files.catbox.moe/ymxboj.png',
            è’æ¼ è‹±é›„: 'https://files.catbox.moe/y61wwa.png',
            é»„é‡‘åŸå¸‚: 'https://files.catbox.moe/832mml.png',
            é»„é‡‘èˆ¹: 'https://files.catbox.moe/puxu1y.png',
            é»„é‡‘å·¨åŒ : 'https://files.catbox.moe/lg6d5i.png',
            æå³°: 'https://files.catbox.moe/j282j7.png',
            é‡‘é•‡ä¹‹å…‰: 'https://files.catbox.moe/4lx5nv.png',
            éªå·æ‰‹çº²: 'https://files.catbox.moe/7apiow.png',
            å‡¯æ—‹èŠ­è•¾: 'https://files.catbox.moe/rdldum.png',
            é‡Œè§å…‰é’»: 'https://files.catbox.moe/meq8kw.png',
            é‡Œè§çš‡å† : 'https://files.catbox.moe/mvmeuq.png',
            è±é’»å¥‡å®: 'https://files.catbox.moe/xm3tws.png',
            é²é“å¤«è±¡å¾: 'https://files.catbox.moe/zogjie.png',
            æ›¼åŸèŒ¶åº§: 'https://files.catbox.moe/8s8ow2.png',
            ç¾å¦™å§¿åŠ¿: 'https://files.catbox.moe/j4gt6b.png',
            ç¾æµ¦æ³¢æ—: 'https://files.catbox.moe/1dtwml.png',
            æ¢¦ä¹‹æ—…: 'https://files.catbox.moe/1k3mhi.png',
            è¿·äººæ™¯è‡´: 'https://files.catbox.moe/8x3cjc.png',
            ç±³æµ´: 'https://files.catbox.moe/c3gtgi.png',
            åå°†æ€’æ¶›: 'https://files.catbox.moe/xwghd4.png',
            æ‘©è€¶é‡ç‚®: 'https://files.catbox.moe/czbbvd.png',
            è°‹å‹‡å…¼å¤‡: 'https://files.catbox.moe/eq4zkw.png',
            ç›®ç™½é˜¿å°”ä¸¹: 'https://files.catbox.moe/ob99q8.png',
            ç›®ç™½å¤šä¼¯: 'https://files.catbox.moe/gbvkte.png',
            ç›®ç™½é«˜å³°: 'https://files.catbox.moe/iysgye.png',
            ç›®ç™½å…‰æ˜: 'https://files.catbox.moe/8d1iwy.png',
            ç›®ç™½éº¦æ˜†: 'https://files.catbox.moe/tpep4q.png',
            ç›®ç™½å–„ä¿¡: 'https://files.catbox.moe/p7t876.png',
            å¥‡é”éª: 'https://files.catbox.moe/6asj2q.png',
            æ°”æ§½: 'https://files.catbox.moe/bk7n8x.png',
            åƒæ˜ä»£è¡¨: 'https://files.catbox.moe/0q627d.png',
            å¼ºå‡»: 'https://files.catbox.moe/vzxfrt.png',
            é’äº‘å¤©ç©º: 'https://files.catbox.moe/5xrxk5.png',
            ç§‹å·å¼¥ç”Ÿ: 'https://files.catbox.moe/2mr9zz.png',
            è£è¿›é—ªè€€: 'https://files.catbox.moe/87lcsh.png',
            æ£®æ—å®ç©´: 'https://files.catbox.moe/50rq7n.png',
            ç¥é¹°: 'https://files.catbox.moe/1bch4y.png',
            åŒæ¶¡è½®: 'https://files.catbox.moe/ffi15d.png',
            ç‰¹åˆ«å‘¨: 'https://files.catbox.moe/waylx3.png',
            å¤©ç‹¼æ˜Ÿè±¡å¾: 'https://files.catbox.moe/457y2f.png',
            ä¸¸å–„æ–¯åŸº: 'https://files.catbox.moe/jujcy2.png',
            æ— å£°é“ƒé¹¿: 'https://files.catbox.moe/s6pnkl.png',
            è¥¿é‡èŠ±: 'https://files.catbox.moe/4qzhsz.png',
            å°æ —å¸½: 'https://files.catbox.moe/nmgyj9.png',
            å°æ—å‰å¥‡: 'https://files.catbox.moe/sd03xi.png',
            æ–°å®‡å®™: 'https://files.catbox.moe/zaad8r.png',
            æç›®: 'https://files.catbox.moe/vejrmc.png',
            æ¨±èŠ±åƒä»£ç‹: 'https://files.catbox.moe/a3g3gf.png',
            ç‰è—»åå­—: 'https://files.catbox.moe/5g6z60.png',
            çœŸå¼“å¿«è½¦: 'https://files.catbox.moe/unihzk.png',
            çœŸæœºä¼¶: 'https://files.catbox.moe/5y8jxf.png',
            ä¸­å±±åº†å…¸: 'https://files.catbox.moe/x8az97.png',
            å‘¨æ—¥å®é™: 'https://files.catbox.moe/uccqyf.png',
            å“èŠ™: 'https://files.catbox.moe/syhdp7.png',
            è¾¾åˆ©é˜¿æ‹‰ä¼¯: 'https://files.catbox.moe/c2ldl4.png',
            é«˜å¤šèŠ¬é˜¿æ‹‰ä¼¯: 'https://files.catbox.moe/x2unca.png',
            é»„é‡‘æ—…ç¨‹: 'https://files.catbox.moe/ebrxrn.png',
            è‰¾å°¼æ–¯é£ç¥: 'https://files.catbox.moe/nnd19a.png',
            å¯Œå£«å¥‡çŸ³: 'https://files.catbox.moe/2p60gy.png',
            è±äºšé©¬é€Š: 'https://files.catbox.moe/xeeyrl.png',
            èƒœåˆ©å¥–åˆ¸: 'https://files.catbox.moe/lnhtai.png',
          };
          return avatars[name] || null;
        }

        // é“å…·æ•°æ® - é«˜é£é™©é“å…·ç³»ç»Ÿ
        getItemData() {
          return [
            {
              id: 'no_item',
              icon: 'âŒ',
              name: 'ä¸å¸¦é“å…·',
              description: 'ä¸æºå¸¦ä»»ä½•é“å…·ï¼Œè½»è£…ä¸Šé˜µ',
              positive: 'æ— æ­£é¢æ•ˆæœ',
              negative: 'æ— è´Ÿé¢æ•ˆæœ',
            },
            {
              id: 'worn_clover',
              icon: 'ğŸ€',
              name: 'ç£¨æŸçš„å››å¶è‰',
              description: 'åªæœ‰ç¬¬ä¸€æ¬¡é‡åˆ°éšæœºäº‹ä»¶æ—¶ï¼Œæ‰å°å¹…æå‡æœ‰åˆ©ç»“æœçš„å‡ ç‡',
              positive: 'ç¬¬ä¸€æ¬¡éšæœºäº‹ä»¶æœ‰åˆ©ç»“æœå‡ ç‡æå‡',
              negative: 'ä»…é™ä¸€æ¬¡ä½¿ç”¨ï¼Œä¹‹åå¤±æ•ˆ',
            },
            {
              id: 'broken_phone',
              icon: 'ğŸ“±',
              name: 'æ•…éšœçš„èµ›é©¬å¨˜æ‰‹æœº',
              description: 'æ‰‹æœºåŠŸèƒ½ä¸å®Œæ•´ï¼Œåªèƒ½æŸ¥çœ‹é©¬å¨˜çš„éƒ¨åˆ†æƒ³æ³•',
              positive: 'å¯ä»¥æŸ¥çœ‹é©¬å¨˜çš„éƒ¨åˆ†æƒ³æ³•',
              negative: 'åŠŸèƒ½ä¸å®Œæ•´ï¼Œä¼šéšæœºè·³å‡ºæ— æ„ä¹‰çš„å¯¹è¯',
            },
            {
              id: 'expired_drink',
              icon: 'ğŸ¥¤',
              name: 'è¿‡æœŸèƒ½é‡é¥®æ–™',
              description: 'æ¢å¤å°‘é‡ä½“åŠ›ï¼Œä½†æœ‰ä¸€å®šå‡ ç‡è®©é©¬å¨˜è¿›å…¥"è…¹æ³»"çŠ¶æ€',
              positive: 'æ¢å¤å°‘é‡ä½“åŠ›',
              negative: 'æœ‰ä¸€å®šå‡ ç‡è®©é©¬å¨˜è¿›å…¥"è…¹æ³»"çŠ¶æ€ï¼ŒçŸ­æœŸå†…æ— æ³•è¿›è¡Œå‰§çƒˆè®­ç»ƒ',
            },
            {
              id: 'unknown_potion',
              icon: 'ğŸ§ª',
              name: 'æœªçŸ¥è¯æ°´',
              description: 'ä¸€ç“¶æœªçŸ¥çš„è¯æ°´ï¼Œå–ä¸‹åå¯èƒ½éšæœºè·å¾—ä¸€ç§èƒ½åŠ›ï¼Œä¹Ÿå¯èƒ½è§¦å‘ä¸€ä¸ªè´Ÿé¢æ•ˆæœ',
              positive: 'å¯èƒ½éšæœºè·å¾—ä¸€ç§èƒ½åŠ›',
              negative: 'ä¹Ÿå¯èƒ½è§¦å‘ä¸€ä¸ªè´Ÿé¢æ•ˆæœï¼Œå®Œå…¨éšæœº',
            },
            {
              id: 'cursed_charm',
              icon: 'ğŸ”®',
              name: 'è¯…å’’æŠ¤èº«ç¬¦',
              description: 'æä¾›åŸºç¡€ä¿æŠ¤ï¼Œä½†ä¼šé€æ¸æ¶ˆè€—ä½¿ç”¨è€…çš„ç†æ™º',
              positive: 'æä¾›åŸºç¡€ä¿æŠ¤ï¼Œå‡å°‘å±é™©äº‹ä»¶',
              negative: 'ä¼šé€æ¸æ¶ˆè€—ä½¿ç”¨è€…çš„ç†æ™ºï¼Œé•¿æœŸä½¿ç”¨å¯èƒ½å¯¼è‡´sanå€¼å½’é›¶',
            },
            {
              id: 'broken_clock',
              icon: 'â°',
              name: 'ç ´æŸçš„é—¹é’Ÿ',
              description: 'å¯ä»¥å›æº¯æ—¶é—´ï¼Œä½†æ¯æ¬¡ä½¿ç”¨éƒ½ä¼šè®©æ—¶é—´å˜å¾—æ›´åŠ æ··ä¹±',
              positive: 'å¯ä»¥å›æº¯æ—¶é—´åˆ°å½“å¤©ä»»æ„æ—¶åˆ»',
              negative: 'æ¯æ¬¡ä½¿ç”¨éƒ½ä¼šè®©æ—¶é—´å˜å¾—æ›´åŠ æ··ä¹±ï¼Œå¯èƒ½å¯¼è‡´æ—¶é—´çº¿é”™ä¹±',
            },
            {
              id: 'fragile_mirror',
              icon: 'ğŸª',
              name: 'æ˜“ç¢çš„é•œå­',
              description: 'å¯ä»¥åå°„ä¼¤å®³ï¼Œä½†æ¯æ¬¡ä½¿ç”¨éƒ½æœ‰ç¢è£‚çš„é£é™©',
              positive: 'å¯ä»¥åå°„ä¸€æ¬¡ä¼¤å®³æ”»å‡»',
              negative: 'æ¯æ¬¡ä½¿ç”¨éƒ½æœ‰ç¢è£‚çš„é£é™©ï¼Œç¢è£‚åå®Œå…¨å¤±æ•ˆ',
            },
            {
              id: 'poisoned_apple',
              icon: 'ğŸ',
              name: 'æ¯’è‹¹æœ',
              description: 'çœ‹ä¼¼æ™®é€šçš„è‹¹æœï¼Œåƒä¸‹åå¯èƒ½è·å¾—åŠ›é‡ï¼Œä¹Ÿå¯èƒ½ä¸­æ¯’',
              positive: 'å¯èƒ½è·å¾—ä¸´æ—¶åŠ›é‡æå‡',
              negative: 'ä¹Ÿå¯èƒ½ä¸­æ¯’ï¼Œå¯¼è‡´ç†æ™ºå€¼å¤§å¹…ä¸‹é™',
            },
            {
              id: 'cursed_dice',
              icon: 'ğŸ²',
              name: 'è¯…å’’éª°å­',
              description: 'æ·éª°å­å†³å®šäº‹ä»¶ç»“æœï¼Œä½†ç»“æœæ€»æ˜¯åå‘è´Ÿé¢',
              positive: 'å¯ä»¥é‡æ–°å†³å®šä¸€æ¬¡äº‹ä»¶ç»“æœ',
              negative: 'ç»“æœæ€»æ˜¯åå‘è´Ÿé¢ï¼Œä¸”æ— æ³•é¢„æµ‹',
            },
            {
              id: 'broken_compass',
              icon: 'ğŸ§­',
              name: 'ç ´æŸçš„æŒ‡å—é’ˆ',
              description: 'æŒ‡å‘çš„ä¸æ˜¯åŒ—æ–¹ï¼Œè€Œæ˜¯å±é™©çš„æ–¹å‘',
              positive: 'å¯ä»¥æ‰¾åˆ°éšè—çš„å±é™©åŒºåŸŸ',
              negative: 'æŒ‡å‘çš„éƒ½æ˜¯å±é™©æ–¹å‘ï¼Œå¯èƒ½å¼•å¯¼åˆ°é™·é˜±',
            },
            {
              id: 'haunted_whistle',
              icon: 'ğŸ“¯',
              name: 'é¬¼é­‚å“¨å­',
              description: 'å¹å“åå¯ä»¥å¬å”¤å¸®åŠ©ï¼Œä½†ä¹Ÿä¼šå¸å¼•å±é™©',
              positive: 'å¯ä»¥å¬å”¤ä¸€æ¬¡å¸®åŠ©',
              negative: 'ä¹Ÿä¼šå¸å¼•å±é™©ç”Ÿç‰©ï¼Œé£é™©æé«˜',
            },
            {
              id: 'cursed_coin',
              icon: 'ğŸª™',
              name: 'è¯…å’’ç¡¬å¸',
              description: 'æ­£é¢å¸¦æ¥å¥½è¿ï¼Œåé¢å¸¦æ¥å„è¿ï¼Œä½†æ€»æ˜¯åé¢æœä¸Š',
              positive: 'ç†è®ºä¸Šå¯ä»¥å¸¦æ¥å¥½è¿',
              negative: 'æ€»æ˜¯åé¢æœä¸Šï¼Œå¸¦æ¥å„è¿',
            },
            {
              id: 'broken_umbrella',
              icon: 'â˜‚ï¸',
              name: 'ç ´æŸçš„é›¨ä¼',
              description: 'å¯ä»¥é®æŒ¡é›¨æ°´ï¼Œä½†ä¼šæ¼é›¨ï¼Œä¸”å¯èƒ½è¢«é£å¹èµ°',
              positive: 'å¯ä»¥é®æŒ¡éƒ¨åˆ†é›¨æ°´',
              negative: 'ä¼šæ¼é›¨ï¼Œä¸”å¯èƒ½è¢«é£å¹èµ°ï¼Œå¤±å»ä¿æŠ¤',
            },
            {
              id: 'cursed_book',
              icon: 'ğŸ“–',
              name: 'è¯…å’’ä¹¦ç±',
              description: 'åŒ…å«æœ‰ç”¨çš„çŸ¥è¯†ï¼Œä½†é˜…è¯»ä¼šæ¶ˆè€—ç†æ™º',
              positive: 'åŒ…å«æœ‰ç”¨çš„çŸ¥è¯†å’Œçº¿ç´¢',
              negative: 'é˜…è¯»ä¼šæ¶ˆè€—ç†æ™ºï¼Œå¯èƒ½å¯¼è‡´sanå€¼ä¸‹é™',
            },
            {
              id: 'broken_lamp',
              icon: 'ğŸª”',
              name: 'ç ´æŸçš„æ²¹ç¯',
              description: 'å¯ä»¥ç…§æ˜ï¼Œä½†æ²¹é‡æœ‰é™ï¼Œä¸”å¯èƒ½å¼•èµ·ç«ç¾',
              positive: 'å¯ä»¥åœ¨é»‘æš—ä¸­ç…§æ˜',
              negative: 'æ²¹é‡æœ‰é™ï¼Œä¸”å¯èƒ½å¼•èµ·ç«ç¾ï¼Œé£é™©å¾ˆé«˜',
            },
            {
              id: 'cursed_ring',
              icon: 'ğŸ’',
              name: 'è¯…å’’æˆ’æŒ‡',
              description: 'æˆ´ä¸Šåè·å¾—åŠ›é‡ï¼Œä½†æ— æ³•å–ä¸‹ï¼Œä¼šé€æ¸è…èš€',
              positive: 'æˆ´ä¸Šåè·å¾—ä¸´æ—¶åŠ›é‡',
              negative: 'æ— æ³•å–ä¸‹ï¼Œä¼šé€æ¸è…èš€ä½©æˆ´è€…',
            },
            {
              id: 'broken_sword',
              icon: 'âš”ï¸',
              name: 'ç ´æŸçš„å‰‘',
              description: 'å¯ä»¥æ”»å‡»æ•Œäººï¼Œä½†å®¹æ˜“æ–­è£‚ï¼Œä¸”å¯èƒ½ä¼¤åˆ°è‡ªå·±',
              positive: 'å¯ä»¥æ”»å‡»æ•Œäºº',
              negative: 'å®¹æ˜“æ–­è£‚ï¼Œä¸”å¯èƒ½ä¼¤åˆ°è‡ªå·±',
            },
            {
              id: 'cursed_scroll',
              icon: 'ğŸ“œ',
              name: 'è¯…å’’å·è½´',
              description: 'åŒ…å«å¼ºå¤§çš„é­”æ³•ï¼Œä½†ä½¿ç”¨åä¼šåå™¬ä½¿ç”¨è€…',
              positive: 'åŒ…å«å¼ºå¤§çš„é­”æ³•æ•ˆæœ',
              negative: 'ä½¿ç”¨åä¼šåå™¬ä½¿ç”¨è€…ï¼Œé€ æˆä¼¤å®³',
            },
            {
              id: 'broken_shield',
              icon: 'ğŸ›¡ï¸',
              name: 'ç ´æŸçš„ç›¾ç‰Œ',
              description: 'å¯ä»¥é˜²å¾¡æ”»å‡»ï¼Œä½†é˜²å¾¡åŠ›æœ‰é™ï¼Œä¸”å¯èƒ½ç¢è£‚',
              positive: 'å¯ä»¥é˜²å¾¡ä¸€æ¬¡æ”»å‡»',
              negative: 'é˜²å¾¡åŠ›æœ‰é™ï¼Œä¸”å¯èƒ½ç¢è£‚ï¼Œå¤±å»ä¿æŠ¤',
            },
            {
              id: 'cursed_potion',
              icon: 'ğŸ§ª',
              name: 'è¯…å’’è¯æ°´',
              description: 'å¯ä»¥æ²»æ„ˆä¼¤å£ï¼Œä½†ä¼šç•™ä¸‹æ°¸ä¹…çš„ç–¤ç—•',
              positive: 'å¯ä»¥æ²»æ„ˆä¼¤å£',
              negative: 'ä¼šç•™ä¸‹æ°¸ä¹…çš„ç–¤ç—•ï¼Œå½±å“å¤–è§‚',
            },
            {
              id: 'broken_armor',
              icon: 'ğŸ¥‹',
              name: 'ç ´æŸçš„æŠ¤ç”²',
              description: 'å¯ä»¥æä¾›ä¿æŠ¤ï¼Œä½†é‡é‡å¾ˆå¤§ï¼Œå½±å“è¡ŒåŠ¨',
              positive: 'å¯ä»¥æä¾›åŸºç¡€ä¿æŠ¤',
              negative: 'é‡é‡å¾ˆå¤§ï¼Œå½±å“è¡ŒåŠ¨é€Ÿåº¦',
            },
            {
              id: 'cursed_amulet',
              icon: 'ğŸ”®',
              name: 'è¯…å’’æŠ¤èº«ç¬¦',
              description: 'å¯ä»¥é©±é‚ªï¼Œä½†ä¼šå¸å¼•æ›´å¤šçš„é‚ªçµ',
              positive: 'å¯ä»¥é©±é™¤ä¸€æ¬¡é‚ªçµ',
              negative: 'ä¼šå¸å¼•æ›´å¤šçš„é‚ªçµï¼Œé£é™©å¢åŠ ',
            },
            {
              id: 'broken_bow',
              icon: 'ğŸ¹',
              name: 'ç ´æŸçš„å¼“ç®­',
              description: 'å¯ä»¥è¿œç¨‹æ”»å‡»ï¼Œä½†å‡†ç¡®åº¦å¾ˆä½ï¼Œä¸”å¯èƒ½åå¼¹',
              positive: 'å¯ä»¥è¿›è¡Œè¿œç¨‹æ”»å‡»',
              negative: 'å‡†ç¡®åº¦å¾ˆä½ï¼Œä¸”å¯èƒ½åå¼¹ä¼¤åˆ°è‡ªå·±',
            },
            {
              id: 'cursed_staff',
              icon: 'ğŸª„',
              name: 'è¯…å’’æ³•æ–',
              description: 'å¯ä»¥æ–½æ³•ï¼Œä½†ä¼šæ¶ˆè€—ä½¿ç”¨è€…çš„ç”Ÿå‘½åŠ›',
              positive: 'å¯ä»¥æ–½æ”¾å¼ºå¤§çš„é­”æ³•',
              negative: 'ä¼šæ¶ˆè€—ä½¿ç”¨è€…çš„ç”Ÿå‘½åŠ›ï¼Œé£é™©å¾ˆé«˜',
            },
            {
              id: 'broken_helm',
              icon: 'â›‘ï¸',
              name: 'ç ´æŸçš„å¤´ç›”',
              description: 'å¯ä»¥ä¿æŠ¤å¤´éƒ¨ï¼Œä½†è§†é‡å—é™ï¼Œä¸”å¯èƒ½å¡ä½',
              positive: 'å¯ä»¥ä¿æŠ¤å¤´éƒ¨å…å—ä¼¤å®³',
              negative: 'è§†é‡å—é™ï¼Œä¸”å¯èƒ½å¡ä½æ— æ³•å–ä¸‹',
            },
          ];
        }

        // æ¸²æŸ“å½“å‰æ­¥éª¤
        renderCurrentStep() {
          // éšè—æ‰€æœ‰æ­¥éª¤å†…å®¹
          $('.step-content').removeClass('active');

          // æ˜¾ç¤ºå½“å‰æ­¥éª¤
          $(`#step${this.currentStep}`).addClass('active');

          // æ›´æ–°æ­¥éª¤å¯¼èˆª
          $('.step-item').removeClass('active completed');
          $('.step-item').each((index, element) => {
            const stepNum = parseInt($(element).data('step'));
            if (stepNum < this.currentStep) {
              $(element).addClass('completed');
            } else if (stepNum === this.currentStep) {
              $(element).addClass('active');
            }
          });

          // æ¸²æŸ“å½“å‰æ­¥éª¤çš„å†…å®¹
          this.renderStepContent();
        }

        // æ¸²æŸ“æ­¥éª¤å†…å®¹
        renderStepContent() {
          switch (this.currentStep) {
            case 1:
              this.renderTalents();
              break;
            case 2:
              this.renderBackgrounds();
              break;
            case 3:
              this.renderLocations();
              break;
            case 4:
              this.renderTimes();
              break;
            case 5:
              this.renderGacha();
              break;
            case 6:
              this.renderItems();
              break;
          }
        }

        // æ¸²æŸ“å¤©èµ‹é€‰æ‹©
        renderTalents() {
          const grid = $('#talentGrid');
          grid.empty();

          this.talents.forEach(talent => {
            const isSelected = this.selections.talent === talent.id;
            const card = `
              <div class="selection-card ${isSelected ? 'selected' : ''}" data-id="${talent.id}">
                <div class="card-icon">${talent.icon}</div>
                <div class="card-title">${talent.name}</div>
                <div class="card-description">${talent.description}</div>
                <div class="card-effects">
                  <div class="positive-effect">
                    <span class="effect-label">âœ… æ­£é¢æ•ˆæœ:</span>
                    <span class="effect-text">${talent.positive}</span>
                  </div>
                  <div class="negative-effect">
                    <span class="effect-label">âŒ è´Ÿé¢æ•ˆæœ:</span>
                    <span class="effect-text">${talent.negative}</span>
                  </div>
                </div>
              </div>
            `;
            grid.append(card);
          });
        }

        // æ¸²æŸ“èƒŒæ™¯é€‰æ‹©
        renderBackgrounds() {
          const grid = $('#backgroundGrid');
          grid.empty();

          this.backgrounds.forEach(background => {
            const isSelected = this.selections.background === background.id;
            const card = `
              <div class="selection-card ${isSelected ? 'selected' : ''}" data-id="${background.id}">
                <div class="card-icon">${background.icon}</div>
                <div class="card-title">${background.name}</div>
                <div class="card-description">${background.description}</div>
                <div class="card-effects">
                  <div class="positive-effect">
                    <span class="effect-label">âœ… ä¼˜åŠ¿:</span>
                    <span class="effect-text">${background.positive}</span>
                  </div>
                  <div class="negative-effect">
                    <span class="effect-label">âŒ ç¼ºé™·:</span>
                    <span class="effect-text">${background.negative}</span>
                  </div>
                </div>
              </div>
            `;
            grid.append(card);
          });
        }

        // æ¸²æŸ“åœ°ç‚¹é€‰æ‹©
        renderLocations() {
          const grid = $('#locationGrid');
          grid.empty();

          this.locations.forEach(location => {
            const isSelected = this.selections.location === location.id;
            const card = `
                          <div class="selection-card ${isSelected ? 'selected' : ''}" data-id="${location.id}">
                              <div class="card-icon">${location.icon}</div>
                              <div class="card-title">${location.name}</div>
                              <div class="card-description">${location.description}</div>
                          </div>
                      `;
            grid.append(card);
          });
        }

        // æ¸²æŸ“æ—¶é—´é€‰æ‹©
        renderTimes() {
          const grid = $('#timeGrid');
          grid.empty();

          // åˆ›å»ºæ»‘åŠ¨æ¡å®¹å™¨
          const sliderContainer = `
            <div class="time-slider-container">
              <div class="time-display">
                <h3>â° é€‰æ‹©æ¸¸æˆå¼€å§‹æ—¶é—´</h3>
                <p id="selectedTimeInfo">è¯·æ‹–åŠ¨æ»‘åŠ¨æ¡é€‰æ‹©æ—¶é—´</p>
              </div>

              <input type="range" class="time-slider" id="timeSlider" min="0" max="4" value="0" step="1">

              <div class="time-labels">
                <div class="time-label" data-index="0">ğŸŒ…<br>æ¸…æ™¨</div>
                <div class="time-label" data-index="1">â˜€ï¸<br>ä¸Šåˆ</div>
                <div class="time-label" data-index="2">ğŸŒ<br>åˆå</div>
                <div class="time-label" data-index="3">ğŸŒ†<br>å‚æ™š</div>
                <div class="time-label" data-index="4">ğŸŒ™<br>æ·±å¤œ</div>
              </div>
            </div>
          `;

          grid.append(sliderContainer);

          // è®¾ç½®åˆå§‹å€¼
          this.updateTimeDisplay(0);
          this.selections.time = this.times[0].id; // è®¾ç½®é»˜è®¤é€‰æ‹©

          // ç»‘å®šäº‹ä»¶
          this.bindTimeSliderEvents();
        }

        // ç»‘å®šæ—¶é—´æ»‘åŠ¨æ¡äº‹ä»¶
        bindTimeSliderEvents() {
          const slider = $('#timeSlider');
          const labels = $('.time-label');

          // æ»‘åŠ¨æ¡å˜åŒ–äº‹ä»¶
          slider.on('input', e => {
            const value = parseInt(e.target.value);
            this.selections.time = this.times[value].id;
            this.updateTimeDisplay(value);
            this.updateTimeLabels(value);
          });

          // æ ‡ç­¾ç‚¹å‡»äº‹ä»¶
          labels.on('click', e => {
            const index = parseInt($(e.currentTarget).data('index'));
            slider.val(index);
            this.selections.time = this.times[index].id;
            this.updateTimeDisplay(index);
            this.updateTimeLabels(index);
          });
        }

        // æ›´æ–°æ—¶é—´æ˜¾ç¤º
        updateTimeDisplay(index) {
          const time = this.times[index];
          const dangerColors = {
            ä½: '#4ade80',
            ä¸­: '#fbbf24',
            é«˜: '#f97316',
            æé«˜: '#ef4444',
          };

          $('#selectedTimeInfo').html(`
            <strong>${time.icon} ${time.name} (${time.time})</strong><br>
            <span style="color: ${dangerColors[time.danger]};">å±é™©ç­‰çº§: ${time.danger}</span><br>
            ${time.description}
          `);
        }

        // æ›´æ–°æ—¶é—´æ ‡ç­¾çŠ¶æ€
        updateTimeLabels(activeIndex) {
          $('.time-label').removeClass('active');
          $(`.time-label[data-index="${activeIndex}"]`).addClass('active');
        }

        // è·³è¿‡æŠ½å¥–æ–¹æ³•
        skipGacha() {
          // éšæœºæŠ½å–ä¸‰ä¸ªä¸åŒçš„é©¬å¨˜
          const shuffled = [...this.umaMusumes].sort(() => 0.5 - Math.random());
          const threeUma = shuffled.slice(0, 3);

          // æ˜¾ç¤ºä¸‰ä¸ªé€‰é¡¹ä¾›é€‰æ‹©
          this.renderGachaOptions(threeUma);

          // æ˜¾ç¤ºè·³è¿‡æç¤º
          $('#gachaResult').append(`
            <div style="margin-top: 15px; padding: 10px; background: rgba(107, 114, 128, 0.1); border: 1px solid #6b7280; border-radius: 4px;">
              <p style="margin: 0; color: #6b7280; font-size: 0.9em;">ğŸ² å·²éšæœºç”Ÿæˆä¸‰ä¸ªé€‰é¡¹ï¼Œè¯·é€‰æ‹©ä¸€ä¸ª</p>
            </div>
          `);

          // ç¦ç”¨ä¸¤ä¸ªæŒ‰é’®
          $('#gachaButton').prop('disabled', true).text('å·²è·³è¿‡');
          $('#skipButton').prop('disabled', true).text('å·²è·³è¿‡');
        }

        // æ¸²æŸ“æŠ½å¥–ç•Œé¢
        renderGacha() {
          const result = $('#gachaResult');
          if (this.selections.umaMusume) {
            const selectedAvatar = this.getUmaAvatar(this.selections.umaMusume);
            result
              .html(
                `
                          <h3>ğŸ‰ æ­å–œè·å¾—é©¬å¨˜ä¼™ä¼´ï¼</h3>
                          <div style="text-align: center; margin: 20px 0;">
                            <div style="display: flex; flex-direction: column; align-items: center;">
                              ${
                                selectedAvatar
                                  ? `<img src="${selectedAvatar}" alt="${this.selections.umaMusume}" style="
                                width: 100px;
                                height: 100px;
                                border-radius: 50%;
                                border: 4px solid #d4af37;
                                box-shadow: 0 6px 16px rgba(139, 69, 19, 0.4);
                                margin-bottom: 15px;
                                display: block;
                              ">`
                                  : ''
                              }
                              <div style="
                                font-size: 1.4em;
                                font-weight: bold;
                                color: #8b4513;
                                text-shadow: 2px 2px 4px rgba(139, 69, 19, 0.3);
                                letter-spacing: 2px;
                                display: block;
                              ">${this.selections.umaMusume}</div>
                            </div>
                          </div>
                          <p style="font-size: 1.1em; color: #654321; line-height: 1.6; text-align: center;">
                            å¥¹å°†æˆä¸ºä½ çš„ç¬¬ä¸€ä¸ªé©¬å¨˜ä¼™ä¼´ï¼Œé™ªä¼´ä½ åº¦è¿‡ç‰¹é›·æ£®å­¦é™¢çš„æ—¶å…‰ã€‚
                          </p>
                      `,
              )
              .show();
            $('#gachaButton').prop('disabled', true).text('å·²æŠ½å¥–');
          } else {
            result.hide();
            $('#gachaButton').prop('disabled', false).text('ğŸ° å¼€å§‹æŠ½å¥–');
          }
        }

        // æ¸²æŸ“é“å…·é€‰æ‹©
        renderItems() {
          const grid = $('#itemGrid');
          grid.empty();

          this.items.forEach(item => {
            const isSelected = this.selections.items.includes(item.id);
            const card = `
              <div class="selection-card ${isSelected ? 'selected' : ''}" data-id="${item.id}">
                <div class="card-icon">${item.icon}</div>
                <div class="card-title">${item.name}</div>
                <div class="card-description">${item.description}</div>
                <div class="card-effects">
                  <div class="positive-effect">
                    <span class="effect-label">âœ… æ•ˆæœ:</span>
                    <span class="effect-text">${item.positive}</span>
                  </div>
                  <div class="negative-effect">
                    <span class="effect-label">âŒ é£é™©:</span>
                    <span class="effect-text">${item.negative}</span>
                  </div>
                </div>
              </div>
            `;
            grid.append(card);
          });
        }

        // å¤„ç†å¡ç‰‡é€‰æ‹©
        handleCardSelection(e) {
          const card = $(e.currentTarget);
          const id = card.data('id');

          // æ ¹æ®å½“å‰æ­¥éª¤å¤„ç†é€‰æ‹©
          switch (this.currentStep) {
            case 1: // å¤©èµ‹é€‰æ‹©
              this.selections.talent = id;
              $('.selection-card').removeClass('selected');
              card.addClass('selected');
              break;
            case 2: // èƒŒæ™¯é€‰æ‹©
              this.selections.background = id;
              $('.selection-card').removeClass('selected');
              card.addClass('selected');
              break;
            case 3: // åœ°ç‚¹é€‰æ‹©
              this.selections.location = id;
              $('.selection-card').removeClass('selected');
              card.addClass('selected');
              break;
            case 4: // æ—¶é—´é€‰æ‹© - ç°åœ¨ä½¿ç”¨æ»‘åŠ¨æ¡ï¼Œä¸éœ€è¦å¤„ç†å¡ç‰‡é€‰æ‹©
              break;
            case 6: {
              // é“å…·é€‰æ‹©
              if (id === 'no_item') {
                // é€‰æ‹©"ä¸å¸¦é“å…·"æ—¶ï¼Œæ¸…ç©ºå…¶ä»–é€‰æ‹©
                this.selections.items = ['no_item'];
                $('.selection-card').removeClass('selected');
                card.addClass('selected');
              } else {
                // å¦‚æœé€‰æ‹©äº†å…¶ä»–é“å…·ï¼Œç§»é™¤"ä¸å¸¦é“å…·"é€‰é¡¹
                const noItemIndex = this.selections.items.indexOf('no_item');
                if (noItemIndex > -1) {
                  this.selections.items.splice(noItemIndex, 1);
                  $('.selection-card[data-id="no_item"]').removeClass('selected');
                }

                const index = this.selections.items.indexOf(id);
                if (index > -1) {
                  // å–æ¶ˆé€‰æ‹©
                  this.selections.items.splice(index, 1);
                  card.removeClass('selected');
                } else if (this.selections.items.length < 3) {
                  // æ·»åŠ é€‰æ‹©
                  this.selections.items.push(id);
                  card.addClass('selected');
                } else {
                  toastr.warning('æœ€å¤šåªèƒ½é€‰æ‹©3ä¸ªé“å…·');
                }
              }
              break;
            }
          }

          this.updateButtons();
        }

        // æ‰§è¡ŒæŠ½å¥–
        performGacha() {
          if (this.selections.umaMusume) {
            toastr.info('å·²ç»æŠ½å¥–è¿‡äº†');
            return;
          }

          const gachaBtn = $('#gachaButton');
          gachaBtn.prop('disabled', true).html('<span class="loading-spinner"></span> æŠ½å¥–ä¸­...');

          // æ¨¡æ‹ŸæŠ½å¥–åŠ¨ç”»
          setTimeout(() => {
            // éšæœºæŠ½å–ä¸‰ä¸ªä¸åŒçš„é©¬å¨˜
            const shuffled = [...this.umaMusumes].sort(() => 0.5 - Math.random());
            const threeUma = shuffled.slice(0, 3);

            // æ˜¾ç¤ºä¸‰ä¸ªé€‰é¡¹ä¾›é€‰æ‹©
            this.renderGachaOptions(threeUma);

            gachaBtn.prop('disabled', true).text('å·²æŠ½å¥–');
            this.updateButtons();
          }, 2000);
        }

        // æ¸²æŸ“é©¬å¨˜é€‰æ‹©é€‰é¡¹
        renderGachaOptions(umaList) {
          const result = $('#gachaResult');
          let optionsHtml = '<h3>ğŸ‰ è¯·é€‰æ‹©ä¸€ä¸ªé©¬å¨˜ä¼™ä¼´ï¼š</h3>';

          umaList.forEach((uma, index) => {
            const avatar = this.getUmaAvatar(uma);
            optionsHtml += `
              <div class="gacha-option" data-uma="${uma}" style="
                display: inline-block;
                margin: 10px;
                padding: 20px;
                border: 2px solid #8b4513;
                border-radius: 12px;
                background: linear-gradient(135deg, rgba(244, 241, 232, 0.95) 0%, rgba(232, 224, 208, 0.9) 100%);
                cursor: pointer;
                transition: all 0.3s ease;
                text-align: center;
                min-width: 160px;
                box-shadow: 0 4px 12px rgba(139, 69, 19, 0.2);
                position: relative;
                overflow: hidden;
                vertical-align: top;
              ">
                <div style="display: flex; flex-direction: column; align-items: center;">
                  ${
                    avatar
                      ? `<img src="${avatar}" alt="${uma}" style="
                    width: 80px;
                    height: 80px;
                    border-radius: 50%;
                    margin-bottom: 12px;
                    border: 3px solid #d4af37;
                    box-shadow: 0 4px 8px rgba(139, 69, 19, 0.3);
                    display: block;
                  ">`
                      : ''
                  }
                  <div style="
                    font-size: 1.2em;
                    font-weight: bold;
                    color: #8b4513;
                    text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8);
                    margin-bottom: 8px;
                    letter-spacing: 1px;
                    display: block;
                  ">${uma}</div>
                  <div style="
                    font-size: 0.9em;
                    color: #654321;
                    font-style: italic;
                    opacity: 0.8;
                    display: block;
                  ">ç‚¹å‡»é€‰æ‹©</div>
                </div>
              </div>
            `;
          });

          result.html(optionsHtml).show();

          // ç»‘å®šé€‰æ‹©äº‹ä»¶
          $('.gacha-option').on('click', e => {
            const selectedUma = $(e.currentTarget).data('uma');
            this.selections.umaMusume = selectedUma;

            // æ›´æ–°æ˜¾ç¤º
            const selectedAvatar = this.getUmaAvatar(selectedUma);
            result.html(`
              <h3>ğŸ‰ æ­å–œè·å¾—é©¬å¨˜ä¼™ä¼´ï¼</h3>
              <div style="text-align: center; margin: 20px 0;">
                <div style="display: flex; flex-direction: column; align-items: center;">
                  ${
                    selectedAvatar
                      ? `<img src="${selectedAvatar}" alt="${selectedUma}" style="
                    width: 100px;
                    height: 100px;
                    border-radius: 50%;
                    border: 4px solid #d4af37;
                    box-shadow: 0 6px 16px rgba(139, 69, 19, 0.4);
                    margin-bottom: 15px;
                    display: block;
                  ">`
                      : ''
                  }
                  <div style="
                    font-size: 1.4em;
                    font-weight: bold;
                    color: #8b4513;
                    text-shadow: 2px 2px 4px rgba(139, 69, 19, 0.3);
                    letter-spacing: 2px;
                    display: block;
                  ">${selectedUma}</div>
                </div>
              </div>
              <p style="font-size: 1.1em; color: #654321; line-height: 1.6; text-align: center;">
                å¥¹å°†æˆä¸ºä½ çš„ç¬¬ä¸€ä¸ªé©¬å¨˜ä¼™ä¼´ï¼Œé™ªä¼´ä½ åº¦è¿‡ç‰¹é›·æ£®å­¦é™¢çš„æ—¶å…‰ã€‚
              </p>
            `);

            this.updateButtons();
            toastr.success(`æ­å–œé€‰æ‹©é©¬å¨˜ï¼š${selectedUma}ï¼`);
          });

          // æ·»åŠ æ‚¬åœæ•ˆæœ
          $('.gacha-option').hover(
            function () {
              $(this).css({
                transform: 'translateY(-3px)',
                'box-shadow': '0 6px 20px rgba(139, 69, 19, 0.4)',
                'border-color': '#d4af37',
              });
            },
            function () {
              $(this).css({
                transform: 'translateY(0)',
                'box-shadow': '0 4px 12px rgba(139, 69, 19, 0.2)',
                'border-color': '#8b4513',
              });
            },
          );
        }

        // æ›´æ–°è¿›åº¦æ¡
        updateProgress() {
          const progress = ((this.currentStep - 1) / (this.totalSteps - 1)) * 100;
          $('#progressFill').css('width', `${progress}%`);
        }

        // æ›´æ–°æŒ‰é’®çŠ¶æ€
        updateButtons() {
          const canGoNext = this.canGoToNextStep();
          const canGoPrev = this.currentStep > 1;
          const isLastStep = this.currentStep === this.totalSteps;

          $('#prevBtn').toggle(canGoPrev);
          $('#nextBtn').toggle(!isLastStep && canGoNext);
          $('#startBtn').toggle(isLastStep && canGoNext);
        }

        // æ£€æŸ¥æ˜¯å¦å¯ä»¥è¿›å…¥ä¸‹ä¸€æ­¥
        canGoToNextStep() {
          switch (this.currentStep) {
            case 1:
              return this.selections.talent !== null;
            case 2:
              return this.selections.background !== null;
            case 3:
              return this.selections.location !== null;
            case 4:
              return this.selections.time !== null;
            case 5:
              return this.selections.umaMusume !== null;
            case 6:
              return this.selections.items.length >= 0; // å…è®¸é€‰æ‹©ä¸å¸¦é“å…·
            default:
              return false;
          }
        }

        // æ£€æŸ¥æ˜¯å¦å¯ä»¥å¯¼èˆªåˆ°æŒ‡å®šæ­¥éª¤
        canNavigateToStep(step) {
          // åªèƒ½å¯¼èˆªåˆ°å·²å®Œæˆçš„æ­¥éª¤æˆ–å½“å‰æ­¥éª¤
          return step <= this.currentStep || this.isStepCompleted(step - 1);
        }

        // æ£€æŸ¥æ­¥éª¤æ˜¯å¦å®Œæˆ
        isStepCompleted(step) {
          switch (step) {
            case 1:
              return this.selections.talent !== null;
            case 2:
              return this.selections.background !== null;
            case 3:
              return this.selections.location !== null;
            case 4:
              return this.selections.time !== null;
            case 5:
              return this.selections.umaMusume !== null;
            default:
              return false;
          }
        }

        // ä¸‹ä¸€æ­¥
        nextStep() {
          if (this.canGoToNextStep() && this.currentStep < this.totalSteps) {
            this.currentStep++;
            this.renderCurrentStep();
            this.updateProgress();
            this.updateButtons();
          }
        }

        // ä¸Šä¸€æ­¥
        prevStep() {
          if (this.currentStep > 1) {
            this.currentStep--;
            this.renderCurrentStep();
            this.updateProgress();
            this.updateButtons();
          }
        }

        // è·³è½¬åˆ°æŒ‡å®šæ­¥éª¤
        goToStep(step) {
          if (this.canNavigateToStep(step)) {
            this.currentStep = step;
            this.renderCurrentStep();
            this.updateProgress();
            this.updateButtons();
          }
        }

        // å¼€å§‹æ¸¸æˆ
        async startGame() {
          if (!this.canGoToNextStep()) {
            toastr.error('è¯·å®Œæˆæ‰€æœ‰é€‰æ‹©åå†å¼€å§‹æ¸¸æˆ');
            return;
          }

          try {
            const startBtn = $('#startBtn');
            startBtn.prop('disabled', true).html('<span class="loading-spinner"></span> æ­£åœ¨å¯åŠ¨æ¸¸æˆ...');

            // 1. æ³¨å…¥å˜é‡åˆ°è§’è‰²
            await this.injectVariables();

            // 2. æ§åˆ¶ä¸–ç•Œä¹¦å¼€å…³
            await this.controlWorldbook();

            // 3. ç”Ÿæˆå¼€åœºå‰§æƒ…
            await this.generateOpeningStory();

            toastr.success('å¼€å±€é…ç½®å·²æ³¨å…¥ï¼Œæ¸¸æˆå¯åŠ¨æˆåŠŸï¼');

            // å»¶è¿Ÿè·³è½¬åˆ°ä¸»é¡µé¢
            setTimeout(() => {
              // è¿™é‡Œå¯ä»¥æ·»åŠ è·³è½¬é€»è¾‘æˆ–ä¸ä¸»é¡µé¢è”åŠ¨çš„ä»£ç 
              console.log('å¼€å±€é€‰æ‹©å®Œæˆï¼Œå‡†å¤‡è¿›å…¥ä¸»æ¸¸æˆ');
              startBtn.prop('disabled', false).text('âœ… æ¸¸æˆå¯åŠ¨æˆåŠŸ');
            }, 2000);
          } catch (error) {
            console.error('æ¸¸æˆå¯åŠ¨å¤±è´¥:', error);
            toastr.error('æ¸¸æˆå¯åŠ¨å¤±è´¥ï¼Œè¯·é‡è¯•');
            $('#startBtn').prop('disabled', false).text('ğŸš€ å¼€å§‹æ¸¸æˆ');
          }
        }

        // æ³¨å…¥å˜é‡åˆ°è§’è‰²
        async injectVariables() {
          try {
            // console.log removed

            // ä½¿ç”¨ MVU API æ³¨å…¥å˜é‡
            if (typeof Mvu !== 'undefined' && Mvu.getMvuData && Mvu.setMvuVariable) {
              // è·å–å½“å‰çš„ MVU æ•°æ®
              const mvuData = Mvu.getMvuData({ type: 'chat' });

              // ä¿®æ”¹ç°æœ‰å˜é‡çš„å€¼
              const variableUpdates = [
                // å¤©èµ‹
                {
                  path: 'è®­ç»ƒå‘˜.å¤©èµ‹.å¤§å¤©èµ‹.name[0]',
                  value: this.talents.find(t => t.id === this.selections.talent)?.name || '',
                },
                // èƒŒæ™¯
                {
                  path: 'è®­ç»ƒå‘˜.èƒŒæ™¯[0]',
                  value: this.backgrounds.find(b => b.id === this.selections.background)?.name || '',
                },
                // ä½ç½®
                {
                  path: 'è®­ç»ƒå‘˜.ä½ç½®[0]',
                  value: this.locations.find(l => l.id === this.selections.location)?.name || '',
                },
                // æ—¶é—´
                {
                  path: 'ä¸–ç•Œ.å½“å‰æ—¶é—´[0]',
                  value: (() => {
                    const selectedTime = this.times.find(t => t.id === this.selections.time);
                    if (selectedTime) {
                      const timeStart = selectedTime.time.split('-')[0];
                      // ç¡®ä¿æ ¼å¼ä¸º HH:MM
                      return timeStart.length === 4 ? '0' + timeStart : timeStart;
                    }
                    return '06:00';
                  })(),
                },
                // åœ¨æ ¡å¤©æ•°
                { path: 'è®­ç»ƒå‘˜.åœ¨æ ¡å¤©æ•°[0]', value: 1 },
              ];

              // é€ä¸ªæ›´æ–°å˜é‡
              for (const variable of variableUpdates) {
                await Mvu.setMvuVariable(mvuData, variable.path, variable.value, {
                  reason: 'å¼€å±€é€‰æ‹©',
                  is_recursive: true,
                });
                // console.log removed
              }

              // æ·»åŠ é©¬å¨˜ - åœ¨ç°æœ‰é©¬å¨˜ç»“æ„ä¸­æ·»åŠ æ–°é©¬å¨˜
              if (this.selections.umaMusume) {
                const umaName = this.selections.umaMusume;
                let initialGoodwill = 15;
                let initialExclusivity = 25;

                // ç‰¹æ®Šé©¬å¨˜è®¾ç½®
                if (umaName === 'çˆ±å¦‚å¾€æ˜”') {
                  initialGoodwill = 100;
                  initialExclusivity = 100;
                }

                // æ·»åŠ æ–°é©¬å¨˜åˆ°é©¬å¨˜å¯¹è±¡
                const umaData = {
                  å¥½æ„Ÿåº¦: [initialGoodwill, `${umaName}å¯¹è®­ç»ƒå‘˜çš„å¥½æ„Ÿåº¦ï¼ŒèŒƒå›´0-100`],
                  ç‹¬å åº¦: [initialExclusivity, `${umaName}å¯¹è®­ç»ƒå‘˜çš„ç‹¬å æ¬²æœ›ï¼ŒèŒƒå›´0-100`],
                  çŠ¶æ€: ['æ­£å¸¸', 'å½“å‰çŠ¶æ€'],
                };

                await Mvu.setMvuVariable(mvuData, `é©¬å¨˜.${umaName}`, umaData, {
                  reason: 'å¼€å±€é€‰æ‹©é©¬å¨˜',
                  is_recursive: true,
                });
                // console.log removed
              }

              // æ·»åŠ é“å…·åˆ°ç‰©å“æ 
              if (this.selections.items && this.selections.items.length > 0) {
                for (const itemId of this.selections.items) {
                  const selectedItem = this.items.find(item => item.id === itemId);
                  if (selectedItem) {
                    const itemPath = `è®­ç»ƒå‘˜.ç‰©å“æ .${selectedItem.name}`;
                    const itemData = {
                      æè¿°: selectedItem.description,
                      æ•ˆæœ: selectedItem.positive,
                      ç¨€æœ‰åº¦: 'æ™®é€š',
                      ç‰¹æ€§: selectedItem.negative,
                    };

                    await Mvu.setMvuVariable(mvuData, itemPath, itemData, {
                      reason: 'å¼€å±€é€‰æ‹©é“å…·',
                      is_recursive: true,
                    });
                    // console.log removed
                  }
                }
              }

              // ä¿å­˜æ›´æ–°åçš„æ•°æ®
              await Mvu.replaceMvuData(mvuData, { type: 'chat' });

              // console.log removed
            } else {
              console.warn('âš ï¸ MVU API ä¸å¯ç”¨ï¼Œè·³è¿‡å˜é‡æ³¨å…¥');
            }
          } catch (error) {
            console.error('âŒ å˜é‡æ³¨å…¥å¤±è´¥:', error);
            throw error;
          }
        }

        // æ§åˆ¶ä¸–ç•Œä¹¦å¼€å…³
        async controlWorldbook() {
          try {
            // console.log removed
            // æ³¨æ„ï¼šç”±äºéœ€è¦ä¸–ç•Œä¹¦æ¡ç›®çš„UIDè€Œä¸æ˜¯åå­—ï¼Œè¿™é‡Œæš‚æ—¶è·³è¿‡ä¸–ç•Œä¹¦æ§åˆ¶
            // å®é™…ä½¿ç”¨æ—¶éœ€è¦å…ˆé€šè¿‡ /findentry å‘½ä»¤è·å–æ¡ç›®çš„UIDï¼Œç„¶åä½¿ç”¨ /setentryfield å‘½ä»¤
            // console.log removed
            // console.log removed
            // TODO: å®ç°æ­£ç¡®çš„ä¸–ç•Œä¹¦æ§åˆ¶é€»è¾‘
            // 1. ä½¿ç”¨ /findentry å‘½ä»¤æŸ¥æ‰¾æ¡ç›®UID
            // 2. ä½¿ç”¨ /setentryfield å‘½ä»¤è®¾ç½® disable å­—æ®µ
          } catch (error) {
            console.error('ä¸–ç•Œä¹¦æ§åˆ¶å¤±è´¥:', error);
            throw error;
          }
        }

        // ç”Ÿæˆå¼€åœºå‰§æƒ…
        async generateOpeningStory() {
          try {
            // console.log removed

            // æ„å»ºå¼€åœºå‰§æƒ…æç¤ºè¯
            const openingPrompt = `
        </å¼€å±€è®¾å®š>
        # å¼€å±€å‰§æƒ…ç”Ÿæˆ

        è¯·æ ¹æ®ä»¥ä¸‹å¼€å±€è®¾å®šï¼Œç”Ÿæˆä¸€æ®µå¼€åœºå‰§æƒ…ï¼Œæè¿°è®­ç»ƒå‘˜åœ¨ç‰¹é›·æ£®å­¦é™¢çš„åˆæ¬¡å…¥æ ¡ä½“éªŒã€‚

        ## å¼€å±€è®¾å®š
        - èƒŒæ™¯ï¼š${(() => {
          const selectedBackground = this.backgrounds.find(bg => bg.id === this.selections.background);
          if (selectedBackground) {
            return `${selectedBackground.name} - ${selectedBackground.description} (æ­£é¢ï¼š${selectedBackground.positive} | è´Ÿé¢ï¼š${selectedBackground.negative})`;
          }
          return '';
        })()}
        - åœ°ç‚¹ï¼š${(() => {
          const selectedLocation = this.locations.find(loc => loc.id === this.selections.location);
          if (selectedLocation) {
            return `${selectedLocation.name} - ${selectedLocation.description}`;
          }
          return '';
        })()}
        - æ—¶é—´ï¼š${(() => {
          const selectedTime = this.times.find(t => t.id === this.selections.time);
          if (selectedTime) {
            return `${selectedTime.name} - ${selectedTime.description}`;
          }
          return '';
        })()}
        - é©¬å¨˜ï¼š${this.selections.umaMusume} - åˆé‡çš„é©¬å¨˜
        - é“å…·ï¼š${(() => {
          const selectedItems = this.selections.items.map(itemId => {
            const item = this.items.find(item => item.id === itemId);
            if (item) {
              return `${item.name} - ${item.description} (æ•ˆæœï¼š${item.positive} | ç‰¹æ€§ï¼š${item.negative})`;
            }
            return itemId;
          });
          return selectedItems.join(', ');
        })()}

        ## é‡è¦æé†’
        å‰§æƒ…å¿…é¡»å®Œå…¨åŸºäºä»¥ä¸Šè®¾å®šï¼Œä½“ç°èƒŒæ™¯èº«ä»½ç‰¹ç‚¹ï¼Œåœ¨æŒ‡å®šåœ°ç‚¹å’Œæ—¶é—´å±•å¼€ï¼Œé‡ç‚¹æå†™ä¸é€‰æ‹©é©¬å¨˜çš„äº’åŠ¨ï¼Œèå…¥é€‰æ‹©çš„é“å…·ã€‚ä¸è¦éšæ„æ”¹å˜ç³»ç»Ÿçš„è®¾å®šã€‚
        
        ## è¦æ±‚
        1. å‰§æƒ…è¦ç¬¦åˆç‰¹é›·æ£®æ€ªè°ˆä¸–ç•Œè§‚
        2. ä½“ç°è®­ç»ƒå‘˜çš„å¤©èµ‹å’ŒèƒŒæ™¯ç‰¹ç‚¹
        3. æè¿°ä¸åˆé‡é©¬å¨˜çš„äº’åŠ¨
        4. è¥é€ åœ¨å¹³é™çš„æ ¡å›­ç”Ÿæ´»é‡Œé¢éšè—ç€çš„ç¥ç§˜ã€ç•¥å¸¦æ‰­æ›²çš„æ°›å›´
        5. ä¸ºåç»­å‰§æƒ…å‘å±•åŸ‹ä¸‹ä¼ç¬”
        6. è®­ç»ƒå‘˜æ²¡æœ‰é‚£ä¹ˆå…¨çŸ¥å…¨èƒ½çŸ¥é“ä¸€åˆ‡,ç”šè‡³æ˜¯ä¸€ä¸ªè¢«å·å…¥çš„æ™®é€šäºº

        ## æ ¼å¼è¦æ±‚
        **1.ä½ å¿…é¡»ä½¿ç”¨<content></content>åŒ…è£¹æ­£æ–‡**
        **2.ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ ¼å¼è¾“å‡º<content>å³å¯ï¼Œå¿…é¡»ä¸¥æ ¼æŒ‰ç…§æ ¼å¼åˆ†è¡Œè¾“å‡º**
        ## éœ€è¦ç”Ÿæˆçš„å˜é‡
        åˆå§‹ç‰©å“: æ ¹æ®èƒŒæ™¯å’Œå¤©èµ‹ï¼Œä»¥åŠé€‰æ‹©çš„é“å…·é…Œæƒ…ç”Ÿæˆåˆå§‹ç‰©å“ 
        <content> 
        [è¯·åœ¨è¿™é‡Œç”Ÿæˆå¼€åœºå‰§æƒ…å†…å®¹]
        </content>

        </å¼€å±€è®¾å®š>`;

            // ä½¿ç”¨ TavernHelper.generate ç”Ÿæˆå‰§æƒ…
            if (typeof TavernHelper !== 'undefined' && TavernHelper.generate) {
              // console.log removed

              const generateConfig = {
                injects: [
                  {
                    role: 'user',
                    content: openingPrompt,
                    position: 'before_char',
                    should_write_to_chat: false,
                    should_scan: true,
                  },
                ],
                should_stream: false,
              };

              const openingStory = await TavernHelper.generate(generateConfig);

              if (!openingStory) {
                throw new Error('AIæœªèƒ½ç”Ÿæˆå¼€åœºå‰§æƒ…ã€‚');
              }

              // æ‰‹åŠ¨å†™å…¥åˆ°ç¬¬0å±‚æ¶ˆæ¯
              const messages = await getChatMessages(0);
              if (!messages || messages.length === 0) {
                throw new Error('æ— æ³•è·å–åˆ°ç¬¬0å±‚æ¶ˆæ¯ï¼Œæ— æ³•å†™å…¥å¼€åœºå‰§æƒ…ã€‚');
              }
              const messageZero = messages[0];

              messageZero.message = openingStory;
              messageZero.data = {};

              await TavernHelper.setChatMessages([messageZero], { refresh: 'all' });

              // console.log removed
              console.log('AIå›å¤å†…å®¹é¢„è§ˆ:', openingStory.substring(0, 200) + '...');
            } else {
              console.warn('âš ï¸ TavernHelper.generate ä¸å¯ç”¨ï¼Œè·³è¿‡å¼€åœºå‰§æƒ…ç”Ÿæˆ');
            }
          } catch (error) {
            console.error('ç”Ÿæˆå¼€åœºå‰§æƒ…å¤±è´¥:', error);
            throw error;
          }
        }
      }

      // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
      $(document).ready(() => {
        // é…ç½®toastr
        toastr.options = {
          closeButton: true,
          progressBar: true,
          positionClass: 'toast-top-right',
          timeOut: 3000,
        };

        // åˆå§‹åŒ–å¼€å±€é€‰æ‹©å™¨
        window.openingSelector = new OpeningSelector();

        // console.log removed
      });
    </script>
  </body>
</html>


